System.register("chunks:///_virtual/UIManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LevelManager.ts","./GameManager.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,l,u,c,g,h,p,y,m,f,d,v,B,b,A,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.defineProperty},function(t){o=t.cclegacy,s=t._decorator,l=t.Label,u=t.Layout,c=t.ProgressBar,g=t.Button,h=t.Widget,p=t.Vec3,y=t.view,m=t.UITransform,f=t.Camera,d=t.clamp,v=t.Animation,B=t.Tween,b=t.Component},function(t){A=t.LevelManager},function(t){C=t.GameManager}],execute:function(){var _,L,w,T,P,R,M,z,k,S,I,G,E,F,U,O,x,D,K,W,j,q,H;o._RF.push({},"0295bsDktRCyoMFBCSxST3+","UIManager",void 0);var N=s.ccclass,V=s.property;t("UIManager",(_=N("UIManager"),L=V(l),w=V(l),T=V(u),P=V(c),R=V(u),M=V(g),z=V(u),k=V(g),S=V(u),I=V(h),_((F=e((E=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(a(e),"labelTip",F,a(e)),i(a(e),"currentLevelLabl",U,a(e)),i(a(e),"transitionAnim",O,a(e)),i(a(e),"progressBar",x,a(e)),i(a(e),"backGroundLayout",D,a(e)),i(a(e),"RestartBtn",K,a(e)),i(a(e),"PlayAgainLay",W,a(e)),i(a(e),"PlayAgainBtn",j,a(e)),i(a(e),"BGBlackMask",q,a(e)),i(a(e),"Canvas",H,a(e)),r(a(e),"_width",void 0),r(a(e),"_height",void 0),r(a(e),"_scale",new p),r(a(e),"_isAudioEnable",!1),e}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.start=function(){this.transitionAnim.node.setScale(0,0,0),this.PlayAgainBtn.node.active=!1,this.labelTip.node.active=!1,this.RestartBtn.node.active=!1,this.CanvasRescale()},o.update=function(t){this._width==y.getFrameSize().width&&this._height==y.getFrameSize().height||this.CanvasRescale()},o.CanvasRescale=function(){this._width=y.getFrameSize().width,this._height=y.getFrameSize().height;var t=1080*this._height/this._width/1920;this._scale=new p(t,t,1),this.Canvas.node.setScale(this._scale),this.Canvas.getComponent(m).setContentSize(1280/this._scale.x,2400/this._scale.y),this.BGBlackMask.getComponent(m).setContentSize(1280*this._scale.x,2400*this._scale.y),this._height<this._width?C.instance.cameraManager.playerCam.node.getComponent(f).fov=35:C.instance.cameraManager.playerCam.node.getComponent(f).fov=60},o.setTip=function(t){this.setTipActive(!0),this.labelTip.getComponent(h).updateAlignment(),this.labelTip.string=t},o.setTipActive=function(t){this.labelTip.node.active=t},o.setBGActive=function(t){this.backGroundLayout.node.active=t},o.setProgressBar=function(t){this.progressBar.progress=d(t,0,1)},o.playTransitionAnimation=function(t){this.transitionAnim.getComponent(v).play(t)},o.setCurrentLevel=function(t){this.currentLevelLabl.string=t.toString()},o.setRestartBtnActive=function(t){if(this.RestartBtn.node.active=t,this.RestartBtn.node.active){this.RestartBtn.node.scale=new p(0,0,0);new B(this.RestartBtn.node).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start();this.RestartBtn.node.on(g.EventType.CLICK,this.Btn_Restart,this)}else{new B(this.RestartBtn.node).to(.1,{scale:new p(0,0,0)},{easing:"quadOut"}).start();this.RestartBtn.node.off(g.EventType.CLICK,this.Btn_Restart,this)}},o.PlayAllCompUI=function(){var t=this;this.PlayAgainLay.getComponent(h).updateAlignment(),this.PlayBGBlackMaskAnim("TryagainanimIn"),setTimeout((function(){t.PlayAgainLay.node.getComponent(v).play("TryagainanimIn")}),30),setTimeout((function(){C.instance.ChangeToNewLevel()}),300),setTimeout((function(){t.PlayAgainBtn.node.active=!0,t.PlayAgainBtn.node.on(g.EventType.CLICK,t.Btn_PlayAgainEvent,t),t.PlayAgainBtn.node.getComponent(v).play("BtnanimIn")}),1e3)},o.PlayBGBlackMaskAnim=function(t){},o.Btn_PlayAgainEvent=function(){var t=this;this.setCurrentLevel(A.CurLevel),this.playTransitionAnimation("changeanimIn"),console.warn("LoadEnd"),setTimeout((function(){t.setBGActive(!1),t.playTransitionAnimation("changeanimOut"),C.instance.audioManager.PlayWhistleSound(),t.PlayAgainLay.node.getComponent(v).play("TryagainanimOut"),t.PlayAgainBtn.node.getComponent(v).play("BtnanimOut"),setTimeout((function(){t.PlayAgainBtn.node.setScale(0,0,0)}),1e3),t.PlayAgainBtn.node.off(g.EventType.CLICK,t.Btn_PlayAgainEvent,t)}),800)},o.Btn_ChangeAudioAvailable=function(){this._isAudioEnable=!this._isAudioEnable},o.Btn_Restart=function(){C.instance.PlaySoundGmMgr("ButtonClick"),C.instance.ReStartGame(),this.setRestartBtnActive(!1)},e}(b)).prototype,"labelTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(E.prototype,"currentLevelLabl",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"transitionAnim",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"progressBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(E.prototype,"backGroundLayout",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(E.prototype,"RestartBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(E.prototype,"PlayAgainLay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(E.prototype,"PlayAgainBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(E.prototype,"BGBlackMask",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(E.prototype,"Canvas",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=E))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["cc"],(function(t){"use strict";var c,e;return{setters:[function(t){c=t.cclegacy,e=t._decorator}],execute:function(){c._RF.push({},"046f7wnikdBDJVCyUWpkc6p","State",void 0);e.ccclass,e.property,t("State",(function(){}));c._RF.pop()}}}));

System.register("chunks:///_virtual/SoccerTeam.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MessageDispatcher.ts","./Constant.ts","./Untilies.ts","./SoccerAI.ts","./GameManager.ts"],(function(e){"use strict";var t,n,o,l,s,i,a,r,c;return{setters:[function(e){t=e.createClass,n=e.defineProperty},function(e){o=e.cclegacy,l=e._decorator},function(e){s=e.MessageType},function(e){i=e.Constant},function(e){a=e.Untilies},function(e){r=e.SoccerAI},function(e){c=e.GameManager}],execute:function(){e("TeamColor",void 0),o._RF.push({},"04fe3x4rBFPE4q5RGpUgU/O","SoccerTeam",void 0);var u;l.ccclass,l.property;!function(e){e[e.Red=0]="Red",e[e.Blue=1]="Blue"}(u||(u=e("TeamColor",{})));e("HomeGoal",function(){function e(e,t){n(this,"_facing",null),n(this,"_center",null),this._facing=e,this._center=t,this._center.z,e.z}return t(e,[{key:"Facing",get:function(){return this._facing.clone()}},{key:"Center",get:function(){return this._center}}]),e}()),e("SoccerTeam",function(){function e(e,t,o,l){n(this,"_score",0),n(this,"_teamColor",u.Red),n(this,"_inTeamPlayerList",[]),n(this,"_opponentTeam",null),n(this,"_ball",null),n(this,"_homeGoal",null),n(this,"continuousKickTimes",0),n(this,"_controllingPlayer",null),n(this,"_receivingPlayer",null),n(this,"_playerClosestToBall",null),n(this,"_playerSubClosestToBall",null),n(this,"_playerClosestToTarget",null),n(this,"_soccerAI",null),n(this,"kickFresher",!0),this._teamColor=e,this._ball=t,this._soccerAI=o,this._homeGoal=l}var o=e.prototype;return o.Update=function(e){this.CalculateClosestPlayerToTarget(),this.CalculateClosestPlayerToBall()},o.SetOpponentTeam=function(e){this._opponentTeam=e},o.AddToPlayerList=function(e){this._inTeamPlayerList.push(e)},o.InControl=function(){return null!=this._controllingPlayer},o.LostControl=function(){this._controllingPlayer=null},o.CalculateClosestPlayerToTarget=function(){var e=this,t=1e6;this._inTeamPlayerList.forEach((function(n){var o=a.Vec3DistanceSq(n.Pos,e._soccerAI.chaseTargetPos);o<t&&(t=o,e._playerClosestToTarget=n)}))},o.CalculateSubPlayerToBall=function(){var e=this,t=1e6;this._playerSubClosestToBall=null,this._inTeamPlayerList.forEach((function(n){var o=n.Pos.clone().subtract(e._ball.Pos),l=o.length();n!=e._playerClosestToBall&&e._ball.LinearVelocity.dot(o)>=0&&l<t&&(t=l,e._playerSubClosestToBall=n)}))},o.CalculateClosestPlayerToBall=function(){var e=this,t=1e6;this._inTeamPlayerList.forEach((function(n){var o=n.Pos.clone().subtract(e._ball.Pos),l=o.length();o.y=0;var s=o.length();l<t&&(t=l,n.SetDistSqToBall(l,s),e._playerClosestToBall=n)}))},o.CanShoot=function(e){return!!e.InRangeOfJudge(this.OpponentTeam.HomeGoal.Center,i.ShootJudgeRangeAngle,i.ShootJudgeRangeMaxDistance,i.ShootJudgeRangeMinDistance)&&(this._soccerAI.kickAnimPlay=!0,!0)},o.CanPass=function(e){for(var t=0;t<this._inTeamPlayerList.length;t++)if(this._inTeamPlayerList[t]!=e&&e.InRangeOfJudge(this._inTeamPlayerList[t].Pos,i.PassJudgeRangeAngle,i.PassJudgeRangeMaxDistance,i.PassJudgeRangeMinDistance))return!0;return!1},o.isOpponentWithinRadius=function(e,t){for(var n=0;n<this._opponentTeam.PlayerList.length;n++){var o=this._opponentTeam.PlayerList[n];if(a.Vec3DistanceSq(e,o.Pos)<t*t)return!0}return!1},o.SetReceiverBehave=function(e){var t=1e6,n=c.instance.lineDrawer.FoucsPointEnd.clone(),o=null;this._inTeamPlayerList.forEach((function(l){if(l!=e){var s=a.Vec3DistanceSq(n,l.Pos);s<t&&(t=s,o=l)}})),null!=o&&(this.ControllingPlayer=null,this.ReceivingPlayer=o,r.MessageDispatcher.DispatchMessage(.1,-1,o.ID,s.Msg_ReceiveBall,n))},t(e,[{key:"Score",get:function(){return this._score},set:function(e){this._score=e}},{key:"TeamColor",get:function(){return this._teamColor},set:function(e){this._teamColor=e}},{key:"PlayerList",get:function(){return this._inTeamPlayerList},set:function(e){this._inTeamPlayerList=e}},{key:"ControllingPlayer",get:function(){return this._controllingPlayer},set:function(e){this._controllingPlayer=e,this.OpponentTeam.LostControl()}},{key:"PlayerClosestToTarget",get:function(){return this._playerClosestToTarget},set:function(e){this._playerClosestToTarget=e}},{key:"ReceivingPlayer",get:function(){return this._receivingPlayer},set:function(e){this._receivingPlayer=e}},{key:"PlayerClosestToBall",get:function(){return this._playerClosestToBall},set:function(e){this._playerClosestToBall=e}},{key:"PlayerSubClosestToBall",get:function(){return this._playerSubClosestToBall}},{key:"HomeGoal",get:function(){return this._homeGoal}},{key:"OpponentTeam",get:function(){return this._opponentTeam}}]),e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseAIEntity.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,e,s;return{setters:[function(t){i=t.createClass,n=t.defineProperty},function(t){e=t.cclegacy,s=t._decorator}],execute:function(){e._RF.push({},"15370evtyhIOJlFTrCuBB8y","BaseAIEntity",void 0);s.ccclass,s.property;var o=t("BaseAIEntity",function(){var t=e.prototype;function e(t,i){n(this,"_entity",void 0),n(this,"m_ID",void 0),n(this,"m_bTag",void 0),n(this,"isEnable",!0),n(this,"_soccerAI",void 0),this._entity=t,this.m_ID=e.GetNextValidID(),this.m_bTag=!1,this._soccerAI=i}return t.IsTagged=function(){return this.m_bTag},t.Tag=function(){this.m_bTag=!0},t.UnTag=function(){this.m_bTag=!1},t.IsEnable=function(){return this.isEnable},t.Enable=function(){this.isEnable=!0,this.Entity.active=!0},t.Disable=function(){this.isEnable=!1,this.Entity.active=!1},e.GetNextValidID=function(){return e.m_iNextValidID++},e.ResetNextValidID=function(){e.m_iNextValidID=0},i(e,[{key:"ID",get:function(){return this.m_ID}},{key:"Pos",get:function(){return this._entity.position.clone()},set:function(t){this._entity.position=t}},{key:"Rot",get:function(){return this._entity.getRotation()},set:function(t){this._entity.setRotation(t)}},{key:"Entity",get:function(){return this._entity}}]),e}());n(o,"m_iNextValidID",0),e._RF.pop()}}}));

System.register("chunks:///_virtual/YouTubeSDK.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var a;t._RF.push({},"158faBzCgFCgY9giJW/EBzF","YouTubeSDK",void 0);var u=n.ccclass;n.property,e("YouTubeSDK",u("YouTubeSDK")(a=function(){function e(){}return e.NotifyGameRady=function(e,t,n){ytgame.game.gameReady(),ytgame.system.onAudioEnabledChange((function(t){e(t)})),ytgame.system.onPause((function(){t()})),ytgame.system.onResume((function(){n()}))},e.SaveData=function(e,t,n){ytgame.game.saveData(e).then((function(){t()}),(function(e){n()}))},e.LoadData=function(e){ytgame.game.loadData().then((function(t){e(t)}))},e.IsAudioEnabled=function(){return ytgame.system.isAudioEnabled()},e}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Telegram.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,s;return{setters:[function(e){i=e.defineProperty},function(e){t=e.cclegacy,s=e._decorator}],execute:function(){t._RF.push({},"20437cY/LVOfJwLmpdVvUCS","Telegram",void 0);s.ccclass,s.property,e("Telegram",(function(e,t,s,r,c){i(this,"Sender",void 0),i(this,"Receiver",void 0),i(this,"Msg",void 0),i(this,"DispatchTime",void 0),i(this,"ExtraInfo",void 0),this.Sender=e,this.Receiver=t,this.Msg=s,this.DispatchTime=r,this.ExtraInfo=c}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./SoccerAI.ts","./YouTubeSDK.ts","./LevelManager.ts","./CameraManager.ts","./LineDrawer.ts","./AIEntityManager.ts","./ColliderManager.ts","./GoalKeeperAnim.ts","./AudioManager.ts","./UIManager.ts"],(function(e){"use strict";var a,i,n,t,r,o,s,l,u,c,g,h,d,m,A,M,f,p,v,T,y,I,L,P,C;return{setters:[function(e){a=e.defineProperty,i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.assertThisInitialized,r=e.initializerDefineProperty,o=e.createClass},function(e){s=e.cclegacy,l=e._decorator,u=e.Node,c=e.game,g=e.find,h=e.Animation,d=e.Component},function(e){m=e.Constant},function(e){A=e.SoccerAI},function(e){M=e.YouTubeSDK},function(e){f=e.LevelManager},function(e){p=e.CameraManager},function(e){v=e.LineDrawer,T=e.ShootType},function(e){y=e.AIEntityManager},function(e){I=e.ColliderManager},function(e){L=e.GoalKeeperAnim},function(e){P=e.AudioManager},function(e){C=e.UIManager}],execute:function(){var b,R,S,w,B,D,k,G,K,F,E,N,_,z,W,U,O,V,j,H,Y;s._RF.push({},"38d7a9AC1RJv6L3L4TXVNRA","GameManager",void 0);var J=l.ccclass,x=l.property;e("GameManager",(b=J("GameManager"),R=x(A),S=x(v),w=x(C),B=x(I),D=x(f),k=x(P),G=x(L),K=x(u),b((Y=H=function(e){function i(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,a(t(i),"_deltaTime",.016),a(t(i),"isShootForKick",!1),a(t(i),"hasWin",!1),a(t(i),"hasFinishAllLevel",!1),a(t(i),"hasLoaded",!1),a(t(i),"cameraManager",void 0),r(t(i),"soccerAI",N,t(i)),r(t(i),"lineDrawer",_,t(i)),r(t(i),"uiManager",z,t(i)),r(t(i),"colliderManager",W,t(i)),r(t(i),"levelManager",U,t(i)),r(t(i),"audioManager",O,t(i)),r(t(i),"goalKeeperAnim",V,t(i)),r(t(i),"rookieTip",j,t(i)),a(t(i),"a",10),a(t(i),"b",20),i}n(i,e);var s=i.prototype;return s.onLoad=function(){null==i.instance&&(i.instance=this,c.setFrameRate(60),c.addPersistRootNode(this.node),this.hasLoaded=!1,this.ReUpdateReference(),m.UseYtSDK?(M.NotifyGameRady(M.IsAudioEnabled,this.PauseGame,this.ResumeGame),M.LoadData(this.levelManager.OnLoadDataSucceed)):f.LoadData(this.levelManager.OnLoadDataSucceed))},s.start=function(){},s.PauseGame=function(){c.pause()},s.ResumeGame=function(){c.resume()},s.update=function(e){this._deltaTime=e,m.FPS60Time=e<.016?e:.017},s.ReUpdateReference=function(){this.cameraManager=g("PlayerCam").getComponent(p)},s.FirstTimeLoad=function(){var e=this;this.node.on("LoadFinshed",(function(){e.LoadEnd()})),this.node.on("AfterReadLevelData",(function(){e.InitGoalPlayerState(),e.ResetValueAfterNewLevel(),e.BeginPlayerInput(),e.hasFinishAllLevel?e.hasFinishAllLevel=!1:e.levelManager.IsFirstStart?e.LoadEnd():setTimeout((function(){e.uiManager.playTransitionAnimation("changeanimOut")}),1e3)})),this.uiManager.setProgressBar(0),this.uiManager.setBGActive(!0),this.colliderManager.RegisterAllCollider(),this.ProgressBarAdd(.2),this.soccerAI.Init(),this.ProgressBarAdd(.2),this.goalKeeperAnim.Init(),this.ProgressBarAdd(.2),this.ChangeToNewLevel()},s.ProgressBarAdd=function(e){this.hasLoaded||(this.uiManager.progressBar.progress+=e)},s.LoadEnd=function(){var e=this;setTimeout((function(){e.ProgressBarAdd(1),setTimeout((function(){e.levelManager.IsFirstStart=!1,e.hasLoaded=!0,e.uiManager.setCurrentLevel(f.CurLevel),e.uiManager.playTransitionAnimation("changeanimIn"),setTimeout((function(){e.uiManager.setBGActive(!1),e.uiManager.playTransitionAnimation("changeanimOut"),e.audioManager.PlayWhistleSound()}),800)}),1e3)}),1e3)},s.ChangeToNewLevel=function(){this.levelManager.UpdateLevelOriginFromJSON(),this.soccerAI.TeamBlue.continuousKickTimes=0,i.instance.rookieTip.position=i.instance.BallPos},s.ResetValueAfterNewLevel=function(){this.cameraManager.canMoveCamera=!0,this.lineDrawer.onTouchEvent(),this.colliderManager.EnableAllCollider(),this.soccerAI.AIPause(),this.hasWin=!1,this.lineDrawer.rayCastPoints=[],this.lineDrawer.foucsPointEnd=null},s.BeginPlayerInput=function(){var e=this,a=this.levelManager.beginPlayer;i.instance.soccerAI.TeamRed.ControllingPlayer=a,this.levelManager.beginPlayer.Entity.getComponent(h).play("pass_center"),this.isShootForKick=!0,setTimeout((function(){e.InPlayerInputTime()}),this.DeltaTime)},s.InitGoalPlayerState=function(){this.goalKeeperAnim.ResetGoalKeeperAnim()},s.GameFail=function(){this.audioManager.PlayGameFailSound(),this.uiManager.setTip("DARN"),this.ReStartTheLevel()},s.ReStartTheLevel=function(){var e=this;this.uiManager.setRestartBtnActive(!1),this.soccerAI.AIPause(),this.cameraManager.canMoveCamera=!1,this.colliderManager.DisableAllCollider(),setTimeout((function(){e.uiManager.setCurrentLevel(f.CurLevel),e.uiManager.setTipActive(!1),e.uiManager.playTransitionAnimation("changeanimIn"),setTimeout((function(){e.ChangeToNewLevel()}),500)}),1e3)},s.ReStartGame=function(){var e=this;this.soccerAI.AIPause(),this.cameraManager.canMoveCamera=!1,this.colliderManager.DisableAllCollider(),setTimeout((function(){e.uiManager.setCurrentLevel(f.CurLevel),e.uiManager.setTipActive(!1),e.uiManager.playTransitionAnimation("changeanimIn"),setTimeout((function(){e.ChangeToNewLevel()}),500)}),100)},s.GoalBall=function(){var e=this;this.audioManager.PlayCheerSound(),this.uiManager.setRestartBtnActive(!1),this.soccerAI.AIPause(),this.uiManager.setTip("Goal!!!"),this.cameraManager.canMoveCamera=!1,this.hasWin=!0,setTimeout((function(){var a=e.levelManager.LevelAdd();e.hasFinishAllLevel?(e.uiManager.setCurrentLevel(a),e.uiManager.setTipActive(!1),e.uiManager.PlayAllCompUI()):(e.uiManager.setCurrentLevel(a),e.uiManager.setTipActive(!1),e.uiManager.playTransitionAnimation("changeanimIn"),setTimeout((function(){e.ChangeToNewLevel()}),500))}),1e3)},s.InAISimulationTime=function(){this.uiManager.RestartBtn.node.active||this.uiManager.setRestartBtnActive(!0),this.lineDrawer.offTouchEvent();var e,a=this.lineDrawer.RotateValue;e=this.lineDrawer.currentShootType==T.LoogShot?this.soccerAI.Ball.LoogKick(this.lineDrawer.FoucsPointEnd,a.multiplyScalar(-m.AngularSpeedAdjuster)):this.soccerAI.Ball.ShortKickByTarget(this.lineDrawer.FoucsPointEnd),e*=this._deltaTime,this.soccerAI.AIPlay(),this.soccerAI.KickWaitLimiter.AddTimePeriod(1e3*e*m.KickWaitTimeAdjuster),this.soccerAI.kickWaitAdjuster.AddTimePeriod(1e3*e*m.KickWaitTimeAdjuster*.1),this.soccerAI.TeamRed.ControllingPlayer=this.soccerAI.TeamRed.PlayerClosestToTarget},s.InPlayerInputTime=function(e){this.soccerAI.CurrentRedTeamController&&(this.lineDrawer.onTouchEvent(),this.soccerAI.AIPause(),this.soccerAI.Ball.Refresh(),i.instance.rookieTip.position=i.instance.BallPos)},s.PlaySoundGmMgr=function(e){"Kick"===e?this.audioManager.PlayKickingSound():this.audioManager.PlaySound(e)},o(i,[{key:"BallPos",get:function(){return this.soccerAI.Ball.Pos.clone()}},{key:"BallVelocity",get:function(){return this.soccerAI.Ball.LinearVelocity.clone()}},{key:"BallHeading",get:function(){return this.soccerAI.Ball.Heading.clone()}},{key:"DeltaTime",get:function(){return this._deltaTime}}],[{key:"EntityManager",get:function(){return this._entityManager}}]),i}(d),a(H,"instance",null),a(H,"_entityManager",new y),N=i((E=Y).prototype,"soccerAI",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(E.prototype,"lineDrawer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(E.prototype,"uiManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(E.prototype,"colliderManager",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(E.prototype,"levelManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(E.prototype,"audioManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(E.prototype,"goalKeeperAnim",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(E.prototype,"rookieTip",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=E))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/Ball.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./GameManager.ts"],(function(t){"use strict";var i,e,n,o,l,a,r,s,c;return{setters:[function(t){i=t.createClass,e=t.defineProperty},function(t){n=t.cclegacy,o=t._decorator,l=t.Vec3,a=t.math,r=t.Quat},function(t){s=t.Constant},function(t){c=t.GameManager}],execute:function(){n._RF.push({},"4374f1o6ypHubl5faaW8Fhe","Ball",void 0);var h;o.ccclass,o.property;!function(t){t[t.None=0]="None",t[t.Kick=1]="Kick",t[t.Bounce=2]="Bounce",t[t.Roll=3]="Roll"}(h||(h={}));t("Ball",function(){function t(t,i){e(this,"_entity",void 0),e(this,"_soccerAI",void 0),e(this,"_linearVelocity",new l(0,0,0)),e(this,"_angularVelocity",new l(0,0,0)),e(this,"canMove",!1),e(this,"_predictionPosArray",[]),e(this,"_predictionFrame",0),e(this,"_lastPos",new l(0,0,0)),e(this,"_ballState",h.None),e(this,"isFirstFall",!0),this._entity=t,this._soccerAI=i}var n=t.prototype;return n.ShortKick=function(t){c.instance.PlaySoundGmMgr("Kick");var i=this._entity.position.clone(),e=t.clone(),n=s.GroundDragCoefficient*s.Gravity,o=[];for(o.push(i);;){var l=o[o.length-1].clone().add(e.clone().multiplyScalar(s.FPS60Time));if(l.y=s.ballRadius,o.push(l),e.subtract(e.clone().normalize().multiplyScalar(n*s.FPS60Time)),e.lengthSqr()<.1)break}this._ballState=h.Roll,this._predictionFrame=this._soccerAI.FrameCount,this._predictionPosArray=o},n.ShortKickByTarget=function(t){var i=t.clone().subtract(this._entity.position);i.clone().lengthSqr()>s.MaxKickDistance*s.MaxKickDistance&&i.normalize().multiplyScalar(s.MaxKickDistance),i=i.clone().normalize().multiplyScalar(1.15*i.length());var e=this._entity.position.clone(),n=new l(0,0,0),o=s.GroundDragCoefficient*s.Gravity;n=i.clone().normalize().multiplyScalar(Math.sqrt(2*i.length()*o));var a=[];for(a.push(e);;){var r=a[a.length-1].clone().add(n.clone().multiplyScalar(s.FPS60Time));if(r.y=s.ballRadius,a.push(r),n.subtract(n.clone().normalize().multiplyScalar(o*s.FPS60Time)),n.lengthSqr()<.1)break}return this._ballState=h.Roll,this._predictionFrame=this._soccerAI.FrameCount,this._predictionPosArray=a,a.length/1.15},n.LoogKick=function(t,i){var e=t.clone();e.y=s.ballRadius;var n=e.clone().subtract(this._entity.position);n.clone().lengthSqr()>s.MaxKickDistance*s.MaxKickDistance&&(n=n.normalize().multiplyScalar(s.MaxKickDistance),e=this._entity.position.clone().add(n));var o,r=this._entity.position.clone(),c=new l(0,0,0);c.y=a.clamp(.2*n.length(),s.LoogKickMinHeight,s.LoogKickMaxHeight);for(var u=s.AirDragCoefficient,y=n.length(),_=i.clone();y>1;){(o=[]).push(r);var p=!1;c.add(n.clone().multiplyScalar(.5));for(var m=c.clone(),d=1;d<1200;d+=1){var g=m.clone().normalize().multiplyScalar(m.lengthSqr()*u),f=new l(0,-s.Gravity,0);f.subtract(g);var S=_.clone().cross(m).multiplyScalar(.1);f.add(S);var F=o[d-1].clone().add(m.clone().multiplyScalar(s.FPS60Time));o.push(F),m.add(f.clone().multiplyScalar(s.FPS60Time/1.4));var P=o[d].clone();if(P.y>=e.y&&!p)p=!0;else if(!(P.y>e.y)||p)if(P.y<=e.y&&!p)n=new l(0,5,0);else{if(P.y>=e.y&&p)continue;if(P.y<e.y&&p){y=(n=e.clone().subtract(o[d-1])).length();break}}}}return this._ballState=h.Kick,this._angularVelocity=i,this._predictionFrame=this._soccerAI.FrameCount,this._predictionPosArray=o,this.isFirstFall=!0,o.length},n.Bounce=function(t,i){var e=this._linearVelocity.clone();if(1==i.y)e.y=-e.y*t,e.x=e.x*s.BounceLinearCoefficient,Math.abs(e.x)<.1&&(e.x=0),e.z=e.z*s.BounceLinearCoefficient,Math.abs(e.z)<.1&&(e.z=0);else{var n=e.clone().subtract(i.multiplyScalar(2*e.dot(i)));e=n.multiplyScalar(t)}var o=[],a=this._entity.position.clone();for(o.push(a);;){var r=e.clone().normalize().multiplyScalar(e.lengthSqr()*s.AirDragCoefficient),c=new l(0,-s.Gravity,0);if(c.subtract(r),o.push(o[o.length-1].clone().add(e.clone().multiplyScalar(s.FPS60Time))),e.add(c.clone().multiplyScalar(s.FPS60Time)),o[o.length-1].y<=0)break}this._ballState=h.Bounce,this._predictionFrame=this._soccerAI.FrameCount,this._predictionPosArray=o},n.Roll=function(){var t=this._linearVelocity.clone(),i=[],e=this._entity.position.clone(),n=s.GroundDragCoefficient*s.Gravity;for(i.push(e);;){var o=i[i.length-1].clone().add(t.clone().multiplyScalar(s.FPS60Time));if(o.y=s.ballRadius,i.push(o),t.subtract(t.clone().normalize().multiplyScalar(n*s.FPS60Time)),t.lengthSqr()<.1)break}this._ballState=h.Roll,this._predictionFrame=this._soccerAI.FrameCount,this._predictionPosArray=i},n.OnUpdate=function(t){if(this._lastPos=this._entity.position.clone(),this._soccerAI.FrameCount>=this._predictionFrame&&this._soccerAI.FrameCount<this._predictionFrame+this._predictionPosArray.length)this._entity.position=this._predictionPosArray[this._soccerAI.FrameCount-this._predictionFrame],this._soccerAI.FrameCount-this._predictionFrame-1>=0&&(this._lastPos=this._predictionPosArray[this._soccerAI.FrameCount-this._predictionFrame-1]);else if(this._soccerAI.FrameCount>=this._predictionFrame+this._predictionPosArray.length&&this._predictionPosArray.length>0)this._entity.position=this._predictionPosArray[this._predictionPosArray.length-1],this._lastPos=this._predictionPosArray[this._predictionPosArray.length-2],this._predictionPosArray.length=0;else if(this.Pos.y-s.ballRadius<=.01){var i=this._entity.position.clone();i.y=s.ballRadius,this._entity.position=i,this._linearVelocity.y<-3?this.Bounce(s.BounceCoefficient,new l(0,1,0)):this._linearVelocity.lengthSqr()>.01&&(this._linearVelocity.y=0,this.Roll())}if(this._linearVelocity=this._entity.position.clone().subtract(this._lastPos).multiplyScalar(1/s.FPS60Time),!(this._linearVelocity.length()<.1)){if(this._ballState==h.Roll||this._ballState==h.Bounce||this._angularVelocity.length()<1){this.isFirstFall&&(this._entity.setRotation(r.IDENTITY.clone()),this.isFirstFall=!1);var e=this._linearVelocity.clone().cross(new l(0,1,0)).multiplyScalar(1).negative().clone().normalize();this._angularVelocity=e.multiplyScalar(3.6*this._linearVelocity.clone().length()/(2*Math.PI*s.ballRadius))}var n=new r(0,0,0,1),o=new r(0,0,0,1);this._ballState!=h.Roll&&this._ballState!=h.Bounce?r.multiply(n,this._entity.getRotation(),r.fromEuler(o,this._angularVelocity.x,5*this._angularVelocity.y,this._angularVelocity.z)):r.multiply(n,this._entity.getRotation(),r.fromEuler(o,this._angularVelocity.x,this._angularVelocity.y,this._angularVelocity.z)),this._entity.setRotation(n)}},n.GetFuturePos=function(t){var i=this._soccerAI.FrameCount-this._predictionFrame+t;i>this._predictionPosArray.length&&(i=this._predictionPosArray.length);var e=this._predictionPosArray[i];return null==e&&(e=this.Pos),e},n.Refresh=function(){this._linearVelocity=new l(0,0,0),this._angularVelocity=new l(0,0,0),this.canMove=!1,this._predictionPosArray=[],this._predictionFrame=0,this._lastPos=this.Pos.clone(),this._entity.setRotation(r.IDENTITY.clone())},i(t,[{key:"Pos",get:function(){return this._entity.position.clone()}},{key:"setPos",set:function(t){this._entity.position=t.clone()}},{key:"Heading",get:function(){return this._entity.forward.clone()}},{key:"LinearVelocity",get:function(){return this._linearVelocity.clone()}},{key:"LinearSpeed",get:function(){return this._linearVelocity.length()}},{key:"AngularVelocity",get:function(){return this._angularVelocity.clone()}},{key:"AngularSpeed",get:function(){return this._angularVelocity.length()}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AIEntityManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.defineProperty},function(t){e=t.cclegacy,i=t._decorator}],execute:function(){e._RF.push({},"4a8d3FeblhDxbceUHv7vVrs","AIEntityManager",void 0);i.ccclass,i.property,t("AIEntityManager",function(){function t(){n(this,"m_EntityMap",void 0),this.m_EntityMap=new Map}var e=t.prototype;return e.RegisterEntity=function(t){this.m_EntityMap.set(t.ID,t)},e.RemoveEntity=function(t){this.m_EntityMap.delete(t.ID)},e.GetEntityFromID=function(t){return this.m_EntityMap.get(t)},e.Reset=function(){this.m_EntityMap.clear()},e.EntityMapSize=function(){return this.m_EntityMap.size},e.GetAllMembers=function(){var t=[];return this.m_EntityMap.forEach((function(n){t.push(n)})),t},e.Update=function(t){this.m_EntityMap.forEach((function(n){n.IsEnable()&&n.OnUpdate(t)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LineDrawer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Untilies.ts","./GameManager.ts"],(function(t){"use strict";var n,i,e,a,o,s,r,c,h,l,u,g,d,p,y,P,f,v,T,m;return{setters:[function(t){n=t.defineProperty,i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,c=t._decorator,h=t.Graphics,l=t.geometry,u=t.Vec3,g=t.PhysicsSystem,d=t.clamp,p=t.systemEvent,y=t.SystemEvent,P=t.Vec2,f=t.Component},function(t){v=t.Constant},function(t){T=t.Untilies},function(t){m=t.GameManager}],execute:function(){var S,C,E,w,_,M,D;t("ShootType",void 0),r._RF.push({},"55efdsCpDVGzZjcOF2FF2qP","LineDrawer",void 0);var k,L=c.ccclass,R=c.property;!function(t){t[t.null=0]="null",t[t.LoogShot=1]="LoogShot",t[t.ShortShot=2]="ShortShot"}(k||(k=t("ShootType",{})));t("LineDrawer",(S=L("LineDrawer"),C=R(h),S((D=M=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,a(o(i),"graphics",_,o(i)),n(o(i),"curve",[]),n(o(i),"FlapPoint1",null),n(o(i),"FlapPoint3",null),n(o(i),"FlapPoint4",null),n(o(i),"FlapPoint_1",null),n(o(i),"FlapPoint_3",null),n(o(i),"FlapPoint_4",null),n(o(i),"rayCastPoints",[]),n(o(i),"foucsPointStart",null),n(o(i),"foucsPointCenter",null),n(o(i),"foucsPointEnd",null),n(o(i),"pointTarget",null),n(o(i),"focusPointDirection",null),n(o(i),"outRay",new l.Ray),n(o(i),"isValidDrawClik",!0),n(o(i),"_lastClickPos",null),n(o(i),"_currentClickPos",null),n(o(i),"tempTimer",0),n(o(i),"currentShootType",k.null),n(o(i),"isShootTarget",!1),n(o(i),"w",new u(0,0,0)),n(o(i),"w_2",new u(0,0,0)),n(o(i),"v_0",new u(0,30,0)),i}e(i,t);var r=i.prototype;return r.onLoad=function(){null==i.instance&&(i.instance=this),this.onTouchEvent()},r.start=function(){this.FlapPoint1=new u(.7925893425941467,.7,-.5),this.FlapPoint4=new u(2.087047576904297,.25,-.5),this.FlapPoint_1=new u(-.7925893425941467,.7,-.5),this.FlapPoint_4=new u(-2.087047576904297,.25,-.5)},r.drawStart=function(t){this.graphics.moveTo(t.x,t.y)},r.drawLine=function(t){this.graphics.lineTo(t.x,t.y),this.graphics.stroke(),this.graphics.moveTo(t.x,t.y)},r.drawFinished=function(t){this.graphics.lineTo(t.x,t.y),this.graphics.stroke(),this.graphics.clear(),this.graphics.enabled=!1},r.onTouchStart=function(t,n){if(m.instance.cameraManager.camInPlayerPos){this.curve.length=0;var i,e=n.getUILocation(),a=n.getLocation();if(m.instance.cameraManager.playerCam.screenPointToRay(a.x,a.y,this.outRay),!g.instance.raycast(this.outRay))return this._currentClickPos=a,void(this.isValidDrawClik=!1);if(g.instance.raycastResults.forEach((function(t){"caoping01"==t.collider.node.name&&(i=t)})),null==i)return this._currentClickPos=a,void(this.isValidDrawClik=!1);if(0==T.PointInCircle(i.hitPoint,m.instance.soccerAI.Ball.Pos,v.LineDrawStartPointRangeDistance))return this._currentClickPos=a,void(this.isValidDrawClik=!1);this.curve.push(a),this.graphics.enabled=!0,this.drawLine(e),this.rayCastPoints=[],this.foucsPointEnd=null,this.isValidDrawClik=!0,this.tempTimer=(new Date).getTime(),this.isShootTarget=!1}},r.onTouchMove=function(t,n){if(m.instance.cameraManager.camInPlayerPos){if(!this.isValidDrawClik)return this._lastClickPos=this._currentClickPos,this._currentClickPos=n.getLocation(),void m.instance.cameraManager.ClickMoveCamera(this._lastClickPos,this._currentClickPos);var i=n.getUILocation(),e=n.getLocation();if(this.curve.push(e),this.drawLine(i),m.instance.cameraManager.playerCam.screenPointToRay(e.x,e.y,this.outRay),g.instance.raycast(this.outRay))for(var a=g.instance.raycastResults,o=0;o<a.length;o++){var s=a[o];if("caoping01"==s.collider.node.name||"netTarget"==s.collider.node.name||"goalSocreJudgePlane"==s.collider.node.name){this.rayCastPoints.push(s.hitPoint);break}}}},r.onTouchEnd=function(t,n){var i=this;if(m.instance.cameraManager.camInPlayerPos&&this.isValidDrawClik){var e,a=n.getUILocation(),o=n.getLocation();if(this.curve.push(o),this.drawFinished(a),m.instance.cameraManager.playerCam.screenPointToRay(o.x,o.y,this.outRay),g.instance.raycast(this.outRay))g.instance.raycastResults.forEach((function(t){"caoping01"==t.collider.node.name||"netTarget"==t.collider.node.name||"goalSocreJudgePlane"==t.collider.node.name?(e=t,i.foucsPointEnd=e.hitPoint,i.focusPointDirection=i.rayCastPoints[Math.round(i.rayCastPoints.length-2)],"caoping01"!=t.collider.node.name&&(i.isShootTarget=!0,i.foucsPointEnd=i.foucsPointEnd.clone().subtract(m.instance.BallPos).multiplyScalar(.3).add(i.foucsPointEnd.clone())),i.foucsPointEnd.y=.15):i.foucsPointEnd}));else this.foucsPointEnd;var s=g.instance.raycast(this.outRay),r=m.instance.soccerAI.CurrentRedTeamController;if(null==this.foucsPointEnd||this.curve.length<2||0==s||0==r.InRangeOfJudge(this.foucsPointEnd,v.PlayerInputJudgeRangeAngle,v.ShootJudgeLineMaxDistance,v.ShootJudgeRangeMinDistance))this.graphics.clear(),this.graphics.enabled=!1,this.onTouchEvent(),m.instance.cameraManager.JudgeRangePlaneFlash();else{var c;this.offTouchEvent(),this.Predict(),this.graphics.clear(),this.graphics.enabled=!1,c=T.Vec3DistanceSq(this.foucsPointEnd,m.instance.soccerAI.Ball.Pos);var h=(new Date).getTime();c<=v.ShortKickMaxDistanceLimit*v.ShortKickMaxDistanceLimit||h-this.tempTimer>v.ShortKickMaxTimeLimit?(this.currentShootType=k.ShortShot,m.instance.PlaySoundGmMgr("sfx_shortpass_1")):(this.currentShootType=k.LoogShot,m.instance.PlaySoundGmMgr("sfx_highpass")),this.isShootTarget&&(this.currentShootType=k.LoogShot,m.instance.PlaySoundGmMgr("sfx_highpass"));var l=this.foucsPointEnd.clone().subtract(m.instance.BallPos),u=d(v.PointTargetAdjuster*l.length(),1,1.5);this.pointTarget=l.clone().normalize().multiplyScalar(u).add(this.foucsPointEnd.clone()),m.instance.InAISimulationTime()}this.rayCastPoints=[],this.curve.length=0}},r.onTouchEvent=function(){p.on(y.EventType.TOUCH_START,this.onTouchStart,this),p.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(y.EventType.TOUCH_END,this.onTouchEnd,this)},r.offTouchEvent=function(){p.off(y.EventType.TOUCH_START,this.onTouchStart,this),p.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(y.EventType.TOUCH_END,this.onTouchEnd,this)},r.Predict=function(){for(var t=180,n=this.curve[this.curve.length-1].y-this.curve[0].y,i=this.curve[0].x-this.curve[this.curve.length-1].x,e=this.curve[this.curve.length-1].x*this.curve[0].y-this.curve[0].x*this.curve[this.curve.length-1].y,a=2,o=0,s=5;s<this.curve.length-5;s+=1){var r=P.clone(this.curve[0]),c=r.subtract(this.curve[s]),h=(r=P.clone(this.curve[this.curve.length-1])).subtract(this.curve[s]),l=c.dot(h);0!=l&&(l/=c.length()*h.length(),(o=180*Math.acos(l)/Math.PI)<t&&0!=o&&(t=o,a=s))}o=Math.min(Math.max(o,80),180),this.w.y=(180-o)/20*-Math.sign(n*this.curve[a].x+i*this.curve[a].y+e)},s(i,[{key:"FoucsPointEnd",get:function(){return this.foucsPointEnd}},{key:"RotateValue",get:function(){return this.w}}]),i}(f),n(M,"instance",null),_=i((w=D).prototype,"graphics",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=w))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Untilies.ts","./LevelManager.ts","./GameManager.ts"],(function(e){"use strict";var a,n,t,o,r,i,l,s,c,d,m,u,y,p,v,h,C,g,P,f;return{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.defineProperty,o=e.assertThisInitialized,r=e.initializerDefineProperty},function(e){i=e.cclegacy,l=e._decorator,s=e.Camera,c=e.Node,d=e.Quat,m=e.Vec3,u=e.math,y=e.lerp,p=e.Tween,v=e.clamp,h=e.Component},function(e){C=e.Constant},function(e){g=e.Untilies},function(e){P=e.LevelManager},function(e){f=e.GameManager}],execute:function(){var M,R,A,I,w,S,T,b,k;i._RF.push({},"7c1ab12XBZAS77ochDrKdLL","CameraManager",void 0);var z=l.ccclass,B=l.property;e("CameraManager",(M=z("CameraManager"),R=B(s),A=B(c),I=B(c),M((T=a((S=function(e){function a(){for(var a,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a=e.call.apply(e,[this].concat(i))||this,t(o(a),"canMoveCamera",!0),t(o(a),"camhasMovedEuler",0),t(o(a),"camInPlayerPos",!1),r(o(a),"playerCam",T,o(a)),r(o(a),"judgeRangePlane",b,o(a)),r(o(a),"judgeRangeSlide",k,o(a)),t(o(a),"isFlash",!1),t(o(a),"cameraMoveSpeed",.1),t(o(a),"cameraChangeSpeed",C.CameraChangeSpeed),t(o(a),"cameraDistance",C.CamDistanceX),a}n(a,e);var i=a.prototype;return i.start=function(){},i.update=function(e){this.canMoveCamera&&(f.instance.soccerAI.AIPlayOn?this.UpdateCameraInAIState():this.UpdateCameraInPlayerState(),this.RenderPassJudgeRange())},i.UpdateCameraInAIState=function(){if(this.playerCam.node.active){var e=f.instance.BallPos.clone(),a=(f.instance.BallHeading,f.instance.BallVelocity),n=e.clone();if(n.y=C.CamLookAtY,a.length()>1){this.CameraLookAt(n),n.y=C.CamLookAtY;var t=this.playerCam.node.forward.clone().clone();t.y=0;var o=this.playerCam.node.getWorldPosition().clone(),r=o.clone();r.y=0;var i=e.clone();i.y=0;var l=i.subtract(t.normalize().multiplyScalar(this.cameraDistance));l.add(f.instance.BallPos);l.y=0;var s=l.clone().subtract(r),c=s.length();s.normalize(),c>1&&(o.add(s.multiplyScalar(this.cameraMoveSpeed)),this.playerCam.node.setPosition(o))}this.camInPlayerPos=!1,this.camhasMovedEuler=0}},i.UpdateCameraInPlayerState=function(){if(this.playerCam.node.active){var e,a;e=f.instance.soccerAI.CurrentRedTeamController.Pos,(a=f.instance.soccerAI.CurrentRedTeamController.Heading.clone()).y=0;var n=new d;d.fromEuler(n,0,180,0),m.transformQuat(a,a,n);var t=this.playerCam.node.getWorldPosition().clone(),o=f.instance.BallPos.clone();if(o=m.lerp(o,f.instance.BallPos.clone(),f.instance.soccerAI.CurrentRedTeamController.Pos.clone(),.05),e=m.lerp(e,f.instance.BallPos.clone(),f.instance.soccerAI.CurrentRedTeamController.Pos.clone(),.05),o.y=0,this.camInPlayerPos){var r=e.clone();return r.y=C.CamLookAtY,void this.playerCam.node.lookAt(r)}var i=a.normalize().multiplyScalar(this.cameraDistance),l=t.clone();l.y=0;var s=o.add(i).clone().subtract(l),c=s.length();s.normalize(),c>1?this.MoveCamera(this.playerCam.node.getWorldPosition().clone(),o.clone().add(i).clone(),e):this.camInPlayerPos=!0}},i.MoveCamera=function(e,a,n){var t=new m(1,0,0),o=n.clone();o.y=0;var r=e.clone();r.y=0;var i=r.clone().subtract(o);i.y=0,i=i.normalize();var l=a.clone().subtract(o);l.y=0,l=l.normalize();var s=e.y;e.y=0;var c=m.distance(r,o);c=u.lerp(c,this.cameraDistance,this.cameraMoveSpeed);var p=new d;d.rotationTo(p,t,i);var v=new d;d.rotationTo(v,t,l),d.slerp(p,p,v,.1);var h=new m(0,0,0);m.transformQuat(h,t,p),h=(h=h.clone().normalize().multiplyScalar(c)).add(o),s=y(s,C.CamPositionY,this.cameraMoveSpeed),h.y=s,this.playerCam.node.setWorldPosition(h),o.y=C.CamLookAtY,this.playerCam.node.lookAt(o)},i.MoveCameraAI=function(e,a,n){var t=new m(1,0,0),o=n.clone();n.y=0;var r=this.playerCam.node.forward.clone();r.normalize(),r.y=0;var i=a.clone();i.y=0;var l=e.y;e.y=0;var s=m.distance(e,n);s=u.lerp(s,this.cameraDistance,this.cameraMoveSpeed);var c=m.angle(t,r),d=m.angle(t,i);c=u.lerp(c,d,.1);var p=new m,v=new m;v.x=s*Math.cos(-c),v.z=s*Math.sin(-c),p=n.subtract(v),l=y(l,C.CamPositionY,this.cameraMoveSpeed),p.y=l,this.playerCam.node.setWorldPosition(p),this.playerCam.node.lookAt(o)},i.CameraMove=function(e,a,n){var t=new m(1,0,0),o=n.clone();n.y=0;var r=this.playerCam.node.forward.clone();r.normalize(),r.y=0;var i=new m;m.subtract(i,a,n),i.y=0;var l=e.y;e.y=0;var s=m.distance(e,n);s=y(s,this.cameraDistance,this.cameraMoveSpeed);var c=m.angle(t,r),d=m.angle(t,i);c=y(c,d,this.cameraMoveSpeed);var u=new m,p=new m;p.x=s*Math.cos(c),p.z=s*Math.sin(c),u=n.add(p.negative()),l=y(l,C.CamPositionY,this.cameraMoveSpeed),u.y=l,this.playerCam.node.setWorldPosition(u),this.playerCam.node.lookAt(o)},i.QuadInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},i.QIOlerp=function(e,a,n){var t=new m;return t.x=e.x+this.QuadInOut(n)*(a.x-e.x),t.y=e.y+this.QuadInOut(n)*(a.y-e.y),t.z=e.z+this.QuadInOut(n)*(a.z-e.z),t},i.CameraLookAt=function(e){var a=this,n=this.playerCam.node.getWorldPosition().clone(),t=new m;m.subtract(t,n,e),m.normalize(t,t);var o=this.playerCam.node.getWorldRotation().clone(),r=new d;d.fromViewUp(r,t,new m(0,1,0));var i=new d;new p(this.playerCam.node).to(.1,{},{onUpdate:function(e,n){i.set(o).slerp(r,.99),a.playerCam.node.setWorldRotation(i)}}).start()},i.ClickMoveCamera=function(e,a){var n=a.clone().subtract(e),t=n.x<0?C.CamRotateSpeed*-n.x:-C.CamRotateSpeed*n.x;if(t=v(t,-.05,.05),this.camhasMovedEuler+=t,this.camhasMovedEuler>=C.CamRotateMaxAngle)this.camhasMovedEuler=C.CamRotateMaxAngle;else if(this.camhasMovedEuler<=-C.CamRotateMaxAngle)this.camhasMovedEuler=-C.CamRotateMaxAngle;else{var o=f.instance.soccerAI.CurrentRedTeamController.Pos,r=this.playerCam.node.getPosition().clone(),i=r.clone().subtract(o);i.y=0,i=g.Vec3DRotateAroundOrigin(i.clone(),t);var l=o.clone().add(i.multiplyScalar(1));l.y=r.y,this.playerCam.node.setPosition(l)}},i.RenderPassJudgeRange=function(){if(f.instance.soccerAI.AIPlayOn||!f.instance.cameraManager.camInPlayerPos)return this.judgeRangePlane.active=!1,this.judgeRangeSlide.active=!1,void(f.instance.rookieTip.active=!1);this.judgeRangeSlide.active=!0;var e=f.instance.soccerAI.CurrentRedTeamReceiver;if(e||(e=f.instance.soccerAI.CurrentRedTeamController),e||(e=f.instance.soccerAI.CurrentRedTeamClosetBallPlayer),this.judgeRangePlane.parent=e.Entity,this.judgeRangeSlide.parent=e.Entity,!(P.CurLevel>1)){f.instance.rookieTip.active=!0;var a=this.playerCam.node.getWorldPosition().clone().subtract(f.instance.rookieTip.position).normalize(),n=new d;d.fromViewUp(n,a,new m(0,1,0));var t,o=new d;if(d.fromEuler(o,90,0,0),d.multiply(n,n,o),f.instance.rookieTip.setRotation(n),t=f.instance.isShootForKick?f.instance.soccerAI.CurrentRedTeamClosetBallPlayer&&f.instance.soccerAI.CurrentRedTeamClosetBallPlayer!==f.instance.soccerAI.TeamRed.ControllingPlayer?f.instance.soccerAI.CurrentRedTeamClosetBallPlayer.Entity.getWorldPosition().clone():f.instance.soccerAI.TeamRed.ControllingPlayer.Entity.forward.clone().multiplyScalar(20).add(f.instance.soccerAI.TeamRed.ControllingPlayer.Entity.getWorldPosition()).clone():f.instance.soccerAI.TeamBlue.HomeGoal.Center.clone(),f.instance.rookieTip.position.clone().subtract(t).negative().length()>1){var r=f.instance.rookieTip.position.clone();r=m.lerp(r,f.instance.rookieTip.position.clone(),t,.03),f.instance.rookieTip.position.set(r)}else f.instance.rookieTip.position=f.instance.BallPos}},i.ResetCamPosToPlayer=function(){var e=f.instance.levelManager.beginPlayer.Pos;e.add(f.instance.levelManager.beginPlayer.Heading.clone().multiplyScalar(-10)),e.y=C.CamPositionY,f.instance.cameraManager.playerCam.node.position=e},i.JudgeRangePlaneFlash=function(){var e=this;this.isFlash=!0,this.unscheduleAllCallbacks(),this.schedule((function(){e.judgeRangePlane.active=!e.judgeRangePlane.active}),.15,3,0)},a}(h)).prototype,"playerCam",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=a(S.prototype,"judgeRangePlane",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=a(S.prototype,"judgeRangeSlide",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=S))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./YouTubeSDK.ts","./UIManager.ts"],(function(i){"use strict";var o,n,t,e,a,u,r,s,l,d,c,h,p,f,S,y;return{setters:[function(i){o=i.defineProperty,n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized,u=i.createClass},function(i){r=i.cclegacy,s=i._decorator,l=i.AudioClip,d=i.find,c=i.AudioSource,h=i.randomRangeInt,p=i.Component},function(i){f=i.Constant},function(i){S=i.YouTubeSDK},function(i){y=i.UIManager}],execute:function(){var g,A,_,M,v,b,m;r._RF.push({},"7f9dfNADgJMQryVZRA23mUK","AudioManager",void 0);var P=s.ccclass,C=s.property;i("AudioManager",(g=P("AudioManager"),A=C([l]),g((m=b=function(i){function n(){for(var n,t=arguments.length,u=new Array(t),r=0;r<t;r++)u[r]=arguments[r];return n=i.call.apply(i,[this].concat(u))||this,e(a(n),"AudioList",v,a(n)),o(a(n),"_audioMap",{}),o(a(n),"_uiManager",null),o(a(n),"_audioVolume",1),o(a(n),"_audioSouce",null),n}t(n,i);var r=n.prototype;return r.onLoad=function(){this._uiManager=d("MainCanvas").getComponent(y),this._audioSouce=this.getComponent(c);for(var i=0;i<this.AudioList.length;++i){var o=this.AudioList[i];this._audioMap[o.name]=o}},n.GetAudioEnabled=function(i){this._isAudioEnable=i},r.PlaySound=function(i){if(!f.UseYtSDK||S.IsAudioEnabled()){var o=this._audioMap[i];o&&("FailSigh"===i?this._audioSouce.playOneShot(o,.5):this._audioSouce.playOneShot(o))}},r.PlayKickingSound=function(){if(!f.UseYtSDK||S.IsAudioEnabled()){var i=h(0,5);this._audioSouce.playOneShot(this.AudioList[i])}},r.PlayCheerSound=function(){this.PlaySound("GoalCheer")},r.PlayGameFailSound=function(){if(!f.UseYtSDK||S.IsAudioEnabled()){var i=this._audioMap.FailSigh;i&&this._audioSouce.playOneShot(i,.5)}},r.PlayWhistleSound=function(){this.PlaySound("PlayWhistle")},u(n,[{key:"AudioVolume",get:function(){return this._audioVolume}}]),n}(p),o(b,"_isAudioEnable",!1),v=n((M=m).prototype,"AudioList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=M))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var a,t,i,n;return{setters:[function(e){a=e.defineProperty},function(e){t=e.cclegacy,i=e._decorator,n=e.Vec3}],execute:function(){t._RF.push({},"84016ttt11MwacPyxDHdrXL","Constant",void 0);i.ccclass,i.property;var o=e("Constant",(function(){}));a(o,"UseYtSDK",!0),a(o,"DefaultMass",1),a(o,"Gravity",10),a(o,"PlayerMaxSpeedWithBall",11),a(o,"PlayerMaxSpeedWithoutBall",10.5),a(o,"DefaultMaxTurnRate",.1),a(o,"PlayerInTargetRange",.8),a(o,"PlayerKickingDistance",1.3),a(o,"PlayerKickingCircle",.5),a(o,"BallWithinReceivingRange",1.5),a(o,"MaxDribbleForce",4),a(o,"MaxKickDistance",60),a(o,"LoogKickMinHeight",1),a(o,"LoogKickMaxHeight",30),a(o,"AirDragCoefficient",1e-4),a(o,"GroundDragCoefficient",.8),a(o,"BounceCoefficient",.25),a(o,"BounceLinearCoefficient",.45),a(o,"AngularSpeedAdjuster",1.25),a(o,"FPS60Time",.017),a(o,"CamRotateMaxAngle",.8),a(o,"CamRotateSpeed",.0025),a(o,"CamPositionY",12.5),a(o,"CamLookAtY",5),a(o,"CamDistanceX",15),a(o,"CameraChangeSpeed",.08),a(o,"LineDrawStartPointRangeDistance",3),a(o,"PassJudgeRangeAngle",65),a(o,"ShootJudgeRangeAngle",40),a(o,"PlayerInputJudgeRangeAngle",105),a(o,"PassJudgeRangeMaxDistance",40),a(o,"PassJudgeRangeMinDistance",4),a(o,"ShootJudgeRangeMaxDistance",30),a(o,"ShootJudgeLineMaxDistance",50),a(o,"ShootJudgeRangeMinDistance",4),a(o,"ShortKickMaxDistanceLimit",15),a(o,"ShortKickMaxTimeLimit",1500),a(o,"PlayerOberseMoveFrequency",.3),a(o,"PlayerKickWaitFrequency",2),a(o,"PlayerDribbleWaitFrequency",4),a(o,"KickWaitTimeAdjuster",.95),a(o,"OppsKickLoogBallRate",.1),a(o,"PointTargetAdjuster",.05),a(o,"PitchHalfHorizontal",35),a(o,"PitchHalfVertical",55),a(o,"ballRadius",.15),a(o,"GoalHalfWidth",7.5),a(o,"GoalHalfHeight",2.44),a(o,"GoalCenterPos",new n(0,0,0)),a(o,"NumRegionsHorizontal",4),a(o,"NumRegionsVertical",8),a(o,"NumSupportSpotsH",4),a(o,"NumSupportSpotsV",8),a(o,"Spot_PassSafeScore",2),a(o,"Spot_CanScoreFromPositionScore",1),a(o,"Spot_DistFromControllingPlayerScore",2),a(o,"SupportSpotUpdateFreq",1),a(o,"PlayerComfortZone",5),t._RF.pop()}}}));

System.register("chunks:///_virtual/MovingAIEntity.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./BaseAIEntity.ts","./SteeringBehaviors.ts","./Untilies.ts"],(function(e){"use strict";var t,n,i,s,r,o,c,u,a,g,d;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.defineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Vec3},function(e){u=e.Constant},function(e){a=e.BaseAIEntity},function(e){g=e.SteeringBehaviors},function(e){d=e.Untilies}],execute:function(){r._RF.push({},"955d4utRU5FtZEJVEgS4R84","MovingAIEntity",void 0);o.ccclass,o.property,e("MovingAIEntity",function(e){function r(t,n,r){var o;return o=e.call(this,t,n)||this,i(s(o),"_velocity",new c(0,0,0)),i(s(o),"_mass",u.DefaultMass),i(s(o),"_vHeading",new c(0,0,0)),i(s(o),"_vSide",new c(0,0,0)),i(s(o),"_maxSpeed",10),i(s(o),"_rigidBody",void 0),i(s(o),"_deltaTime",0),i(s(o),"m_pSteering",void 0),o._vHeading=r,o._vSide=d.Vec3Perp(o._vHeading),o.m_pSteering=new g(s(o),o._soccerAI.Ball),o}t(r,e);var o=r.prototype;return o.OnUpdate=function(e){},o.HandleMessage=function(e){return!1},n(r,[{key:"Velocity",get:function(){return this._velocity},set:function(e){this._velocity=e}},{key:"Mass",get:function(){return this._mass},set:function(e){this._mass=e}},{key:"MaxSpeed",get:function(){return this._maxSpeed}},{key:"Speed",get:function(){return this._velocity.length()}},{key:"SpeedSq",get:function(){return this._velocity.lengthSqr()}},{key:"RigidBody",get:function(){return this._rigidBody}},{key:"DeltaTime",get:function(){return this._deltaTime}},{key:"Heading",get:function(){return this._vHeading.clone()}},{key:"setHeading",set:function(e){this._vHeading=e}},{key:"Side",get:function(){return this._vSide.clone()}},{key:"Steering",get:function(){return this.m_pSteering}}]),r}(a));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShootAnimEvent.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.Component}],execute:function(){var i;o._RF.push({},"9f497BKVnpNF5jBqXS1/4IJ","ShootAnimEvent",void 0);var c=e.ccclass;e.property,t("ShootAnimEvent",c("ShootAnimEvent")(i=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o}(r))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/MessageDispatcher.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Telegram.ts","./GameManager.ts"],(function(e){"use strict";var t,s,a,r,i,o,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,s=e.defineProperty},function(e){a=e.cclegacy,r=e._decorator,i=e.error},function(e){o=e.Telegram},function(e){n=e.GameManager}],execute:function(){e("MessageType",void 0),a._RF.push({},"a9ca9l0zA1Gc6KUn0oidLu9","MessageDispatcher",void 0);var c;r.ccclass,r.property;!function(e){e[e.Msg_ReceiveBall=0]="Msg_ReceiveBall",e[e.Msg_PassToMe=1]="Msg_PassToMe",e[e.Msg_SupportAttacker=2]="Msg_SupportAttacker",e[e.Msg_GoHome=3]="Msg_GoHome",e[e.Msg_Wait=4]="Msg_Wait",e[e.Msg_ChaseBall=5]="Msg_ChaseBall",e[e.Msg_Dribble=6]="Msg_Dribble"}(c||(c=e("MessageType",{})));e("MessageDispatcher",function(){function e(){s(this,"PriorityQ",void 0),this.PriorityQ=new Set}var a=e.prototype;return a.DispatchMessage=function(e,t,s,a,r){var i=n.EntityManager.GetEntityFromID(s),c=new o(t,s,a,0,r);if(e<=0)this.Discharge(i,c);else{var g=(new Date).getTime();c.DispatchTime=g+e,this.PriorityQ.add(c)}},a.DispatchDelayedMessage=function(){for(var e,s=(new Date).getTime(),a=t(this.PriorityQ);!(e=a()).done;){var r=e.value;if(r.DispatchTime<s){var i=n.EntityManager.GetEntityFromID(r.Receiver);this.Discharge(i,r)}}},a.Discharge=function(e,t){return!!e.HandleMessage(t)||(i("Message not handled"),!1)},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/ColliderManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./GameManager.ts"],(function(e){"use strict";var l,r,n,i,o,t,a,s,g,d,h,u,c;return{setters:[function(e){l=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.defineProperty},function(e){t=e.cclegacy,a=e._decorator,s=e.Node,g=e.Collider,d=e.Vec3,h=e.Component},function(e){u=e.Constant},function(e){c=e.GameManager}],execute:function(){var C,f,b,P,p,y,T,v,m,E,N;t._RF.push({},"ad4a70DaVxHd7BlqgQPIZHs","ColliderManager",void 0);var M=a.ccclass,B=a.property;e("ColliderManager",(C=M("ColliderManager"),f=B(s),b=B(s),P=B(g),p=B(s),C((v=l((T=function(e){function l(){for(var l,r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return l=e.call.apply(e,[this].concat(t))||this,n(i(l),"boundaryParent",v,i(l)),o(i(l),"boundaryColliders",[]),n(i(l),"goalNet",m,i(l)),o(i(l),"goalNetColliders",[]),n(i(l),"goalTargetPlaneCollider",E,i(l)),n(i(l),"goalPillerParent",N,i(l)),o(i(l),"goalPillerColliders",null),l}r(l,e);var t=l.prototype;return t.onLoad=function(){},t.RegisterAllCollider=function(){this.boundaryColliders=this.boundaryParent.getComponentsInChildren(g),this.goalNetColliders=this.goalNet.getComponents(g),this.goalPillerColliders=this.goalPillerParent.getComponentsInChildren(g);for(var e=0;e<this.boundaryColliders.length;e++)this.boundaryColliders[e].on("onTriggerEnter",this.onBoundaryTriggerEnter,this);for(var l=0;l<this.goalNetColliders.length;l++)this.goalNetColliders[l].on("onTriggerEnter",this.onCollTriggerEnter,this);this.goalTargetPlaneCollider.on("onTriggerEnter",this.onScoreJudgeTriggerEnter,this);for(var r=0;r<this.goalPillerColliders.length;r++)this.goalPillerColliders[r].on("onTriggerEnter",this.onGoalPillerTriggerEnter,this)},t.onBoundaryTriggerEnter=function(e){c.instance.hasWin||"ball"==e.otherCollider.node.name&&(c.instance.uiManager.setTip("WHAT?!"),c.instance.ReStartTheLevel(),c.instance.PlaySoundGmMgr("FailSigh"))},t.onCollTriggerEnter=function(e){"ball"==e.otherCollider.node.name&&(c.instance.hasWin||(c.instance.uiManager.setTip("WHAT?!"),c.instance.ReStartTheLevel()),c.instance.soccerAI.Ball.Refresh())},t.onScoreJudgeTriggerEnter=function(e){if("ball"==e.otherCollider.node.name){c.instance.GoalBall();for(var l=0;l<this.boundaryColliders.length;l++)this.boundaryColliders[l].enabled=!1;for(var r=0;r<this.goalPillerColliders.length;r++)this.goalPillerColliders[r].enabled=!1}},t.onGoalPillerTriggerEnter=function(e){if(!c.instance.hasWin&&"ball"==e.otherCollider.node.name){var l=new d(0,0,-1);c.instance.soccerAI.Ball.Bounce(u.BounceCoefficient,l),c.instance.PlaySoundGmMgr("sfx_hit_goalpost")}},t.EnableAllCollider=function(){for(var e=0;e<this.boundaryColliders.length;e++)this.boundaryColliders[e].enabled=!0;for(var l=0;l<this.goalNetColliders.length;l++)this.goalNetColliders[l].enabled=!0;this.goalTargetPlaneCollider.enabled=!0;for(var r=0;r<this.goalPillerColliders.length;r++)this.goalPillerColliders[r].enabled=!0},t.DisableAllCollider=function(){for(var e=0;e<this.boundaryColliders.length;e++)this.boundaryColliders[e].enabled=!1;for(var l=0;l<this.goalNetColliders.length;l++)this.goalNetColliders[l].enabled=!1;this.goalTargetPlaneCollider.enabled=!1;for(var r=0;r<this.goalPillerColliders.length;r++)this.goalPillerColliders[r].enabled=!1},l}(h)).prototype,"boundaryParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=l(T.prototype,"goalNet",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=l(T.prototype,"goalTargetPlaneCollider",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=l(T.prototype,"goalPillerParent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=T))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/Regulator.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,d;return{setters:[function(e){t=e.createClass,i=e.defineProperty},function(e){d=e.cclegacy}],execute:function(){d._RF.push({},"adc21ut2EtOoJyNEhL63/TJ","Regulator",void 0);e("Regulator",function(){function e(e){i(this,"m_dwNextUpdateTime",0),i(this,"m_dwUpdatePeriod",0),this.m_dwUpdatePeriod=1e3/e}var d=e.prototype;return d.isReady=function(){var e=(new Date).getTime();return e>this.m_dwNextUpdateTime&&(this.m_dwNextUpdateTime=e+this.m_dwUpdatePeriod,!0)},d.AddTimePeriod=function(e){var t=(new Date).getTime();this.m_dwNextUpdateTime=null!=e?t+e:t+this.m_dwUpdatePeriod},t(e,[{key:"Ready",get:function(){return(new Date).getTime()>this.m_dwNextUpdateTime}}]),e}());d._RF.pop()}}}));

System.register("chunks:///_virtual/SteeringBehaviors.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./GameManager.ts"],(function(t){"use strict";var e,n,i,r,a,o,s,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,n=t.createClass,i=t.defineProperty},function(t){r=t.cclegacy,a=t._decorator,o=t.Vec3},function(t){s=t.Constant},function(t){c=t.GameManager}],execute:function(){t("Deceleration",void 0),r._RF.push({},"ca0784OV6tHvJMamOeMPHNi","SteeringBehaviors",void 0);var u,l;a.ccclass,a.property;!function(t){t[t.slow=3]="slow",t[t.normal=2]="normal",t[t.fast=1]="fast"}(u||(u=t("Deceleration",{}))),function(t){t[t.none=0]="none",t[t.seek=1]="seek",t[t.arrive=2]="arrive",t[t.separation=4]="separation",t[t.pursuit=8]="pursuit",t[t.interpose=16]="interpose"}(l||(l={}));t("SteeringBehaviors",function(){var t=r.prototype;function r(t,e){i(this,"ownerEntity",null),i(this,"m_ball",null),i(this,"m_vSteeringForce",new o(0,0,0)),i(this,"m_vTarget",new o(0,0,0)),i(this,"m_dViewDistance",1),i(this,"m_iFlags",0),this.ownerEntity=t,this.m_ball=e}return t.SeekOn=function(){this.m_iFlags|=l.seek},t.ArriveOn=function(){this.m_iFlags|=l.arrive},t.SeparationOn=function(){this.m_iFlags|=l.separation},t.SeekOff=function(){this.On(l.seek)&&(this.m_iFlags^=l.seek)},t.ArriveOff=function(){this.On(l.arrive)&&(this.m_iFlags^=l.arrive)},t.SeparationOff=function(){this.On(l.separation)&&(this.m_iFlags^=l.separation)},t.SeekIsOn=function(){return this.On(l.seek)},t.ArriveIsOn=function(){return this.On(l.arrive)},t.SeparationIsOn=function(){return this.On(l.separation)},t.SetTarget=function(t){this.m_vTarget=t},t.ForwardComponent=function(){return this.ownerEntity.Heading.dot(this.m_vSteeringForce)},t.SideComponent=function(){return this.ownerEntity.Side.dot(this.m_vSteeringForce)*s.DefaultMaxTurnRate},t.On=function(t){return(this.m_iFlags&t)==t},t.Calculate=function(){return this.m_vSteeringForce=new o(0,0,0),this.m_vSteeringForce=this.SumForces(),this.m_vSteeringForce=this.m_vSteeringForce.clone().normalize().multiplyScalar(this.ownerEntity.MaxSpeed),this.m_vSteeringForce},t.AccumulateForce=function(t,e){var n=t.length(),i=this.ownerEntity.MaxSpeed-n;if(i<=0)return!1;var r=e.length();return r>i&&(r=i),t.add(e.clone().normalize().multiplyScalar(r)),this.m_vSteeringForce=t,!0},t.SumForces=function(){var t=new o(0,0,0);return this.On(l.seek)&&(t.add(this.Seek(this.m_vTarget)),this.AccumulateForce(this.m_vSteeringForce,t)),this.m_vSteeringForce},t.Seek=function(t){var e=new o(0,0,0);return(e=t.clone().subtract(this.ownerEntity.Pos).normalize().multiplyScalar(this.ownerEntity.MaxSpeed)).y=0,e.subtract(this.ownerEntity.Velocity).multiplyScalar(.01)},t.Arrive=function(t,e){var n=new o(0,0,0),i=(n=t.clone().subtract(this.ownerEntity.Pos)).length();if(i>0){var r=i/(.3*e);r=Math.min(r,this.ownerEntity.MaxSpeed),n.multiplyScalar(r/i)}return n.subtract(this.ownerEntity.Velocity).multiplyScalar(1)},t.FindNeighbours=function(){for(var t,n=e(c.EntityManager.GetAllMembers());!(t=n()).done;){var i=t.value;if(i!=this.ownerEntity)i.UnTag(),this.ownerEntity.Pos.clone().subtract(i.Pos).lengthSqr()<this.m_dViewDistance*this.m_dViewDistance&&i.Tag()}},t.Separation=function(){for(var t,n=new o(0,0,0),i=e(c.EntityManager.GetAllMembers());!(t=i()).done;){var r=t.value;if(r!=this.ownerEntity&&r.IsTagged()){var a=this.ownerEntity.Pos.clone().subtract(r.Pos);n.add(a.normalize().multiplyScalar(1/a.length()))}}return n},n(r,[{key:"Target",get:function(){return this.m_vTarget}},{key:"Force",get:function(){return this.m_vSteeringForce}}]),r}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./SoccerTeam.ts","./YouTubeSDK.ts","./GameManager.ts"],(function(e){"use strict";var n,a,t,i,r,o,l,s,c,u,f,P,g,y;return{setters:[function(e){n=e.defineProperty,a=e.inheritsLoose,t=e.assertThisInitialized,i=e.createClass},function(e){r=e.cclegacy,o=e._decorator,l=e.Vec3,s=e.Quat,c=e.resources,u=e.Component},function(e){f=e.Constant},function(e){P=e.TeamColor},function(e){g=e.YouTubeSDK},function(e){y=e.GameManager}],execute:function(){var v,L,m;r._RF.push({},"d310cimFXVPuJ0rBtLZWMdT","LevelManager",void 0);var p=o.ccclass;o.property,e("LevelManager",p("LevelManager")((m=L=function(e){function r(){for(var a,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return a=e.call.apply(e,[this].concat(r))||this,n(t(a),"maxLevel",void 0),n(t(a),"PlayerOriginPos",new Array),n(t(a),"PlayerOriginRot",new Array),n(t(a),"CamOrginPos",new l),n(t(a),"CamOrginRot",new s),n(t(a),"BallOriginPos",new l),n(t(a),"beginPlayer",null),n(t(a),"_isFirstStart",!0),a}a(r,e);var o=r.prototype;return o.onLoad=function(){},o.start=function(){},r.LoadData=function(e){this.loadData().then((function(n){e(n)}))},r.SaveLevelData=function(e,n,a){this.saveData(e).then((function(){n()}),(function(e){a()}))},r.loadData=function(){return new Promise((function(e,n){e(JSON.parse(localStorage.getItem("LevelData")))}))},r.saveData=function(e){return new Promise((function(e,n){localStorage.setItem("LevelData",JSON.stringify(r.CurLevel.toString())),e()}))},o.OnSaveDataSucceed=function(){},o.OnSaveDataFail=function(){},o.OnLoadDataSucceed=function(e){r.CurLevel=Number(e)?Number(e):1,y.instance.FirstTimeLoad()},o.LevelAdd=function(){return r.CurLevel++,r.CurLevel>this.maxLevel&&(r.CurLevel=1,y.instance.hasFinishAllLevel=!0),f.UseYtSDK?g.SaveData(r.CurLevel.toString(),this.OnSaveDataSucceed,this.OnSaveDataFail):r.SaveLevelData(r.CurLevel.toString(),this.OnSaveDataSucceed,this.OnSaveDataFail),r.CurLevel},o.UpdateLevelOriginFromJSON=function(){var e=this;c.load("levelConfigTable",(function(n,a){n&&console.log(n);var t=a,i="level_";i+=t.json[r.CurLevel-1].levelID,e.maxLevel=t.json.length,c.load(i,(function(n,a){n&&console.log(n);var t=a;t=t.json,e.PlayerOriginPos.length=0,y.instance.soccerAI.TeamRed.PlayerList.length=0,y.instance.soccerAI.TeamBlue.PlayerList.length=0,y.EntityManager.GetAllMembers().forEach((function(e){e.Disable();var n=e;n.PlayerTeam.TeamColor==P.Red?y.instance.soccerAI.TeamRed.PlayerList.push(n):y.instance.soccerAI.TeamBlue.PlayerList.push(n)})),t.aiPlayerConfig.OwnPlayer.forEach((function(n){if(0==t.aiPlayerConfig.OwnPlayer.indexOf(n));else{var a=e.PositionRemapping(new l(n.position_x,n.position_y,n.position_z));y.instance.soccerAI.TeamRed.PlayerList[t.aiPlayerConfig.OwnPlayer.indexOf(n)-1].Pos=a,y.instance.soccerAI.TeamRed.PlayerList[t.aiPlayerConfig.OwnPlayer.indexOf(n)-1].Enable()}}));var i=new Array;y.instance.soccerAI.TeamRed.PlayerList.forEach((function(e){e.IsEnable()&&i.push(e)})),y.instance.soccerAI.TeamRed.PlayerList=i,t.aiPlayerConfig.OpponentPlayer.forEach((function(n){if(0==t.aiPlayerConfig.OpponentPlayer.indexOf(n));else{var a=e.PositionRemapping(new l(n.position_x,n.position_y,n.position_z));y.instance.soccerAI.TeamBlue.PlayerList[t.aiPlayerConfig.OpponentPlayer.indexOf(n)-1].Pos=a,y.instance.soccerAI.TeamBlue.PlayerList[t.aiPlayerConfig.OpponentPlayer.indexOf(n)-1].Enable()}}));var r=new Array;y.instance.soccerAI.TeamBlue.PlayerList.forEach((function(e){e.IsEnable()&&r.push(e)})),y.instance.soccerAI.TeamBlue.PlayerList=r,y.instance.soccerAI.Ball.setPos=e.PositionRemapping(new l(t.ballConfig.position_x,t.ballConfig.position_y,t.ballConfig.position_z));var o=new s;s.fromEuler(o,t.ballConfig.rotation_x,t.ballConfig.rotation_y,t.ballConfig.rotation_z),y.instance.soccerAI.Ball.Refresh(),y.instance.soccerAI.TeamRed.PlayerList.forEach((function(n){(n.TrackBall(),n.FaceBall(),e.beginPlayer)?y.instance.soccerAI.Ball.Pos.subtract(n.Pos).length()<e.beginPlayer.Pos.clone().subtract(y.instance.soccerAI.Ball.Pos).length()&&(e.beginPlayer=n):e.beginPlayer=n})),y.instance.soccerAI.TeamBlue.PlayerList.forEach((function(e){e.TrackBall(),e.FaceBall()})),y.instance.cameraManager.ResetCamPosToPlayer(),e.node.emit("AfterReadLevelData")}))}))},o.PositionRemapping=function(e){var n=e;return n=new l(n.z,n.y,-n.x)},i(r,[{key:"IsFirstStart",get:function(){return this._isFirstStart},set:function(e){this._isFirstStart=e}}]),r}(u),n(L,"CurLevel",1),v=m))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/Anim.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var o,i,n,s,e,h,r,a,c;return{setters:[function(t){o=t.createClass,i=t.defineProperty},function(t){n=t.cclegacy,s=t._decorator,e=t.Vec3,h=t.Tween,r=t.Vec2,a=t.Quat},function(t){c=t.GameManager}],execute:function(){n._RF.push({},"d5b46cgAVdK/ZiX3KWxqJ7N","Anim",void 0);s.ccclass,s.property,t("KickAnimPlayer",function(){function t(t,o){i(this,"soccerAI",null),i(this,"animation",null),i(this,"_isRunning",!0),i(this,"_canShoot",!1),i(this,"_isShooting",!1),i(this,"_isLeftFoot",!1),i(this,"_ballLoc",new e),i(this,"_shootStartLoc",new r),i(this,"_shootLeftStruct",{AnimName:"shoot_left",TotalTime:.63,HitTime:.5,ShootLoc:new e(.3,0,.5),StartShootLoc:new e(0,0,2),MoveVec:new e(-.3,0,1.5)}),i(this,"_shootRightStruct",{AnimName:"shoot_right",TotalTime:.63,HitTime:.5,ShootLoc:new e(-.3,0,.5),StartShootLoc:new e(0,0,2),MoveVec:new e(.3,0,1.5)}),i(this,"_shootAnim",null),i(this,"_currentRedTeamController",null),i(this,"_isStopRunning",!1),this.soccerAI=t,this.animation=o,this._currentRedTeamController=this.soccerAI.CurrentRedTeamController,this._ballLoc=this.soccerAI.Ball.Pos}var n=t.prototype;return n.Update=function(t){this._currentRedTeamController=this.soccerAI.CurrentRedTeamController,this.Shoot(t)},n.Shoot=function(t){this._ballLoc=this.soccerAI.Ball.GetFuturePos(30);var o=this.calWorldLoc(this._ballLoc,this._currentRedTeamController.Entity.getRotation(),this._shootLeftStruct.StartShootLoc);this._shootStartLoc.x=o.x,this._shootStartLoc.y=o.z,this._ballLoc.y<=.3&&this.IsArriveShoot(this._shootStartLoc,this._currentRedTeamController.Pos)?this._canShoot=!0:this._canShoot=!1,this._canShoot||this._isShooting?this._canShoot&&!this._isShooting&&(this._isStopRunning=!0,this.RuntoShoot(t)):(e.squaredDistance(this._ballLoc,this._currentRedTeamController.Pos)>6?this.MoveToTarget(t,this._ballLoc):this.MoveToTarget(t,new e(this._shootStartLoc.x,0,this._shootStartLoc.y)),this._isStopRunning=!1)},n.ShootFinish=function(){this._canShoot=!1,this._isShooting=!1},n.LeftFoot=function(){this._isLeftFoot=!0},n.RightFoot=function(){this._isLeftFoot=!1},n.RuntoShoot=function(t){this._isRunning&&this._canShoot?this._isLeftFoot?(this.ShootAnimPlay(this._shootLeftStruct),this._shootAnim=this._shootLeftStruct):(this.ShootAnimPlay(this._shootRightStruct),this._shootAnim=this._shootRightStruct):this._isRunning||this._isShooting||(this.animation.crossFade("run",.3),this._isRunning=!0)},n.ShootAnimPlay=function(t){var o=new e;this._isShooting=!0,o=this.calWorldLoc(this._ballLoc,this._currentRedTeamController.Entity.getRotation(),t.ShootLoc);new h(this._currentRedTeamController.Entity).to(t.HitTime,{position:o},{easing:"linear"}).start();this.animation.crossFade(t.AnimName,.3)},n.MoveToTarget=function(t,o){this.animation.getState("run")._isPlaying||!this._isRunning||this._canShoot||this._isShooting||(this.animation.stop(),this.animation.play("run"));var i=new r(this._currentRedTeamController.Pos.x,this._currentRedTeamController.Pos.z),n=new r,s=new r(o.x,o.z);r.subtract(n,s,i),n.normalize();var h=new r;r.multiplyScalar(h,n,5*t);var a=new e(h.x,0,h.y);e.add(a,this._currentRedTeamController.Pos,a),this._currentRedTeamController.Pos=new e(a.x,a.y,a.z)},n.ShootPoint=function(){this.animation.pause(),c.instance.InPlayerInputTime(this._currentRedTeamController)},n.IsArriveShoot=function(t,o){return Math.abs(t.x-o.x)+Math.abs(t.y-o.z)<=.05},n.calWorldLoc=function(t,o,i){var n=new e,s=new a;return e.transformQuat(s,i,o),e.add(n,s,t),n},o(t,[{key:"IsShooting",get:function(){return this._isShooting}},{key:"isStopRunning",get:function(){return this._isStopRunning}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FieldPlayerStates.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./State.ts","./SoccerTeam.ts","./Anim.ts","./GameManager.ts"],(function(e){"use strict";var t,n,a,i,r,c,o,s,l,u,y,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,a=e.defineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e.Animation,o=e.Vec3},function(e){s=e.Constant},function(e){l=e.State},function(e){u=e.TeamColor},function(e){y=e.KickAnimPlayer},function(e){h=e.GameManager}],execute:function(){r._RF.push({},"dc8843p9xpJ+pK9VZo0GAt+","FieldPlayerStates",void 0);var f=e("FieldPlayer_GlobalPlayerState",function(e){function r(){var t;return t=e.call(this)||this,a(i(t),"theTargetPos",null),t}t(r,e);var c=r.prototype;return c.Enter=function(e){},c.Execute=function(e){e.PlayerTeam.TeamColor==u.Blue&&e.SetMaxSpeed(.9*s.PlayerMaxSpeedWithoutBall),e._soccerAI.AIPlayOn||e.GetFSM().ChangeState(m.Instance)},c.Exit=function(e){},c.OnMessage=function(e,t){return!1},n(r,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new r),this._instance}}]),r}(l));a(f,"_instance",void 0);var m=e("FieldPlayer_WaitState",function(e){function a(){return e.call(this)||this}t(a,e);var i=a.prototype;return i.Enter=function(e){e._soccerAI.AIPlayOn},i.Execute=function(e){if(e._soccerAI.AIPlayOn)return e.TrackBall(),void e.GetFSM().ChangeState(S.Instance)},i.Exit=function(e){},i.OnMessage=function(e,t){return!1},n(a,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(l));a(m,"_instance",void 0);var S=e("FieldPlayer_ObserveState",function(e){function a(){return e.call(this)||this}t(a,e);var i=a.prototype;return i.Enter=function(e){},i.Execute=function(e){if(e.TrackBall(),e.isClosestTeamMemberToTarget())return e.GetFSM().ChangeState(p.Instance),e.PlayerTeam.TeamColor,void u.Red;Math.random()<.025&&e.isReadyForNextOberseMove()&&e.ObserveMoveOn(.5*e._soccerAI.Ball.LinearSpeed)},i.Exit=function(e){},i.OnMessage=function(e,t){return!1},n(a,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(l));a(S,"_instance",void 0);var _=e("FieldPlayer_KickBallState",function(e){function a(){return e.call(this)||this}t(a,e);var i=a.prototype;return i.Enter=function(e){e.PlayerTeam.ControllingPlayer=e,e.PlayerTeam.TeamColor!=u.Blue?e.PlayerTeam.ControllingPlayer=e:e.GetFSM().ChangeState(T.Instance)},i.Execute=function(e){return e.PlayerTeam.CanShoot(e)?(e.Entity.getComponent(c).play("pass_center"),void setTimeout((function(){h.instance.isShootForKick=!1,h.instance.InPlayerInputTime(e),e.PlayerTeam.OpponentTeam.continuousKickTimes=0}),1)):e.PlayerTeam.CanPass(e)&&e.isThreatened()?(e.Entity.getComponent(c).play("pass_center"),void setTimeout((function(){h.instance.isShootForKick=!0,h.instance.InPlayerInputTime(e),e.PlayerTeam.OpponentTeam.continuousKickTimes=0}),1)):void e.GetFSM().ChangeState(T.Instance)},i.Exit=function(e){},i.OnMessage=function(e,t){return!1},n(a,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(l));a(_,"_instance",void 0);var g=e("FieldPlayer_KickAnimState",function(e){function r(){var t;return t=e.call(this)||this,a(i(t),"kickAnimPlayer",null),t}t(r,e);var o=r.prototype;return o.Enter=function(e){e.PlayerTeam.TeamColor!=u.Blue?this.kickAnimPlayer=new y(e._soccerAI,e.Entity.getComponent(c)):e.GetFSM().ChangeState(S.Instance)},o.Execute=function(e){this.kickAnimPlayer.Update(e.DeltaTime)},o.Exit=function(e){},o.OnMessage=function(e,t){return!1},n(r,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new r),this._instance}}]),r}(l));a(g,"_instance",void 0);var T=e("FieldPlayer_DribbleState",function(e){function a(){return e.call(this)||this}t(a,e);var i=a.prototype;return i.Enter=function(e){e.PlayerTeam.ControllingPlayer=e},i.Execute=function(e){if(e.m_dribbleWaitLimiter.isReady()){e.PlayerTeam.TeamColor==u.Red&&e._soccerAI.Ball.Pos.y>1&&e.Entity.getComponent(c).crossFade("run_touch_chest_high_left");var t=e.PlayerTeam.OpponentTeam.HomeGoal.Center.clone().subtract(e.Pos).normalize();e._soccerAI.Ball.ShortKick(t.multiplyScalar(2*s.MaxDribbleForce)),e.PlayerTeam.TeamColor==u.Blue&&(e.PlayerTeam.continuousKickTimes++,e.PlayerTeam.continuousKickTimes>3&&(e._soccerAI.Ball.LoogKick(e.Heading.clone().multiplyScalar(35),o.ZERO),h.instance.GameFail())),e.GetFSM().ChangeState(p.Instance)}else e.GetFSM().ChangeState(p.Instance)},i.Exit=function(e){},i.OnMessage=function(e,t){return!1},n(a,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(l));a(T,"_instance",void 0);var p=e("FieldPlayer_ChaseBallState",function(e){function a(){return e.call(this)||this}t(a,e);var i=a.prototype;return i.Enter=function(e){e.Steering.SeekOn()},i.Execute=function(e){if(!e.isThreatenedByOpponent()||e.PlayerTeam.InControl()){if(!e.BallWithinKickingRange()||!e._soccerAI.kickWaitAdjuster.Ready)return e.isClosestTeamMemberToTarget()?(e.Steering.SetTarget(e._soccerAI.chaseTargetPos),e._soccerAI.KickWaitLimiter.Ready?e.SetMaxSpeed(s.PlayerMaxSpeedWithoutBall):e.SetMaxSpeed(1.1*s.PlayerMaxSpeedWithoutBall),void(e.AtTarget()&&e.GetFSM().ChangeState(S.Instance))):void e.GetFSM().ChangeState(S.Instance);e.GetFSM().ChangeState(_.Instance)}else e.GetFSM().ChangeState(S.Instance)},i.Exit=function(e){e.Steering.SeekOff()},i.OnMessage=function(e,t){return!1},n(a,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(l));a(p,"_instance",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/Untilies.ts",["cc"],(function(t){"use strict";var n,r,e;return{setters:[function(t){n=t.cclegacy,r=t.Mat4,e=t.Vec3}],execute:function(){n._RF.push({},"dc97biI6RhAKZKrxErp0QA4","Untilies",void 0);t("Untilies",function(){function t(){}return t.InverseTransformPoint=function(t,n,e){var i=new r;return i.set(e),i.invert(),t.transformMat4(i),t.subtract(n)},t.Vec3Distance=function(t,n){var r=n.x-t.x,e=n.y-t.y,i=n.z-t.z;return Math.sqrt(r*r+e*e+i*i)},t.Vec3DistanceSq=function(t,n){var r=n.x-t.x,e=n.y-t.y,i=n.z-t.z;return r*r+e*e+i*i},t.GetTangentPoints=function(n,r,e,i,c){var a=t.Vec3DistanceSq(n,e);if(a<r*r)return 0;var s=r/Math.sqrt(a),u=Math.asin(s),o=Math.atan2(e.z-n.z,e.x-n.x);return i.x=n.x+r*Math.cos(o+u),i.z=n.z+r*Math.sin(o+u),c.x=n.x+r*Math.cos(o-u),c.z=n.z+r*Math.sin(o-u),2},t.Vec3DRotateAroundOrigin=function(t,n){var e=new r;return e.set(Math.cos(n),0,Math.sin(n),0,0,1,0,0,-Math.sin(n),0,Math.cos(n),0,0,0,0,0),t.transformMat4(e),t},t.Vec3Perp=function(t){return new e(-t.z,t.y,t.x)},t.Truncate=function(t,n){return t.clone().length()>n&&(t.normalize(),t.multiplyScalar(n)),t},t.PointInCircle=function(n,r,e){return t.Vec3DistanceSq(r,n)<e*e},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SoccerAI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MessageDispatcher.ts","./Constant.ts","./PlayerBase.ts","./SoccerTeam.ts","./Regulator.ts","./FieldPlayer.ts","./Ball.ts","./GameManager.ts"],(function(e){"use strict";var t,i,n,a,r,l,o,s,u,c,m,h,d,f,y,p,g,T,k,R,b;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.assertThisInitialized,r=e.initializerDefineProperty,l=e.createClass},function(e){o=e.cclegacy,s=e._decorator,u=e.Node,c=e.Vec3,m=e.Component},function(e){h=e.MessageDispatcher},function(e){d=e.Constant},function(e){f=e.PlayerRole},function(e){y=e.SoccerTeam,p=e.TeamColor,g=e.HomeGoal},function(e){T=e.Regulator},function(e){k=e.FieldPlayer},function(e){R=e.Ball},function(e){b=e.GameManager}],execute:function(){var P,B,C,w,v,A,_,D,F,L,S;o._RF.push({},"ddb42chftVC96seHnHAsDUv","SoccerAI",void 0);var I=s.ccclass,M=s.property;e("SoccerAI",(P=I("SoccerAI"),B=M(u),C=M(u),w=M(u),P((S=L=function(e){function i(){for(var i,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return i=e.call.apply(e,[this].concat(l))||this,t(a(i),"_frameCount",1),t(a(i),"frameTimeTemp",0),t(a(i),"ball",null),t(a(i),"teamRed",null),t(a(i),"teamBlue",null),t(a(i),"playOn",!0),t(a(i),"kickAnimPlay",!1),t(a(i),"m_kickWaitLimiter",void 0),t(a(i),"chaseTargetPos",new c),t(a(i),"goalKeeperHasBall",!1),t(a(i),"kickWaitAdjuster",void 0),r(a(i),"ballNode",_,a(i)),r(a(i),"redTeam",D,a(i)),r(a(i),"blueTeam",F,a(i)),i}n(i,e);var o=i.prototype;return o.Init=function(){i._messageDispatcher=new h,this.ball=new R(this.ballNode,this),this.teamRed=new y(p.Red,this.ball,this,new g(new c(0,0,-1),new c(0,0,55))),this.teamBlue=new y(p.Blue,this.ball,this,new g(new c(0,0,1),new c(0,0,-55))),this.teamRed.SetOpponentTeam(this.teamBlue),this.teamBlue.SetOpponentTeam(this.teamRed),this.ballNode,b.EntityManager.Reset();for(var e=0;e<this.redTeam.length;e++)this.teamRed.AddToPlayerList(this.BindNode(this.redTeam[e],this.teamRed,e));for(var t=0;t<this.blueTeam.length;t++)this.teamBlue.AddToPlayerList(this.BindNode(this.blueTeam[t],this.teamBlue,t));this.m_kickWaitLimiter=new T(d.PlayerKickWaitFrequency),this.kickWaitAdjuster=new T(d.PlayerKickWaitFrequency)},o.onLoad=function(){},o.update=function(e){0!=b.instance.hasLoaded&&(b.EntityManager.Update(e),this.teamRed.Update(e),this.teamBlue.Update(e),this.UpdateFrame(),this.ball.OnUpdate(e),this.KickWaitLimiter.Ready?this.chaseTargetPos=this.ball.Pos:this.chaseTargetPos=b.instance.lineDrawer.pointTarget.clone())},o.AIPlay=function(){this.playOn=!0},o.AIPause=function(){this.playOn=!1},o.UpdateFrame=function(){var e;e=Math.floor(this.frameTimeTemp/d.FPS60Time),this.frameTimeTemp=this.frameTimeTemp%d.FPS60Time,this._frameCount+=e,this.frameTimeTemp+=b.instance.DeltaTime},o.BindNode=function(e,t,n){var a,r=this.node.getComponent(i);return a=new k(e,r,e.forward,f.Attacker,t,0),b.EntityManager.RegisterEntity(a),a},l(i,[{key:"Ball",get:function(){return this.ball}},{key:"BallNode",get:function(){return this.ballNode}},{key:"RedTeam",get:function(){return this.redTeam}},{key:"BlueTeam",get:function(){return this.blueTeam}},{key:"FrameCount",get:function(){return this._frameCount}},{key:"AIPlayOn",get:function(){return this.playOn}},{key:"TeamRed",get:function(){return this.teamRed}},{key:"TeamBlue",get:function(){return this.teamBlue}},{key:"CurrentRedTeamClosetBallPlayer",get:function(){return this.teamRed.PlayerClosestToBall}},{key:"CurrentRedTeamController",get:function(){return this.teamRed.ControllingPlayer}},{key:"InitRedTeamController",set:function(e){this.teamRed.ControllingPlayer=e}},{key:"CurrentBlueTeamController",get:function(){return this.teamBlue.ControllingPlayer}},{key:"CurrentRedTeamReceiver",get:function(){return this.teamRed.ReceivingPlayer}},{key:"CurrentBlueTeamReceiver",get:function(){return this.teamBlue.ReceivingPlayer}},{key:"KickWaitLimiter",get:function(){return this.m_kickWaitLimiter}}],[{key:"MessageDispatcher",get:function(){return this._messageDispatcher}}]),i}(m),t(L,"_messageDispatcher",void 0),_=i((A=S).prototype,"ballNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(A.prototype,"redTeam",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(A.prototype,"blueTeam",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=A))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/FieldPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Untilies.ts","./PlayerBase.ts","./StateMachine.ts","./SoccerTeam.ts","./FieldPlayerStates.ts","./Regulator.ts","./GameManager.ts"],(function(e){"use strict";var t,i,n,a,o,s,r,l,c,h,m,u,y,_,d,p,g;return{setters:[function(e){t=e.inheritsLoose,i=e.defineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.SkeletalAnimation,r=e.clamp,l=e.Vec3},function(e){c=e.Constant},function(e){h=e.Untilies},function(e){m=e.PlayerBase},function(e){u=e.StateMachine},function(e){y=e.TeamColor},function(e){_=e.FieldPlayer_GlobalPlayerState,d=e.FieldPlayer_WaitState},function(e){p=e.Regulator},function(e){g=e.GameManager}],execute:function(){a._RF.push({},"dfc67ZleUlHcqfhh/cxmGAd","FieldPlayer",void 0);o.ccclass,o.property,e("FieldPlayer",function(e){function a(t,a,o,r,h,m){var u;return u=e.call(this,t,a,o,r,h)||this,i(n(u),"_stateMachine",void 0),i(n(u),"m_pKickLimiter",void 0),i(n(u),"m_oberseMoveLimiter",void 0),i(n(u),"m_dribbleWaitLimiter",void 0),i(n(u),"_predictionFrame",0),i(n(u),"observeMovePoint",new l(0,0,0)),i(n(u),"tempFrameAdd",0),i(n(u),"_animComp",null),i(n(u),"fakeV",new l(0,0,0)),u.m_oberseMoveLimiter=new p(c.PlayerOberseMoveFrequency),u.Steering.SeparationOn(),u.InitStateMachine(),u._animComp=u._entity.getComponent(s),u}t(a,e);var o=a.prototype;return o.InitStateMachine=function(){this._stateMachine=new u(this),this._stateMachine.SetGlobalState(_.Instance),this._stateMachine.SetCurrentState(d.Instance),this.m_dribbleWaitLimiter=new p(c.PlayerDribbleWaitFrequency)},o.GetFSM=function(){return this._stateMachine},o.OnUpdate=function(e){if(this._deltaTime=e,this._stateMachine.Update(),this._soccerAI.AIPlayOn){if(this._entity.getComponent(s).resume(),this.m_pSteering.Calculate(),this.m_pSteering.Force.length()<1){this._velocity=this._velocity.multiplyScalar(.8)}var t=this.Steering.SideComponent();t=r(t,-c.DefaultMaxTurnRate,c.DefaultMaxTurnRate),h.Vec3DRotateAroundOrigin(this._vHeading,t),this._velocity=this._vHeading.clone().normalize().multiplyScalar(this._velocity.length()),this.Entity.forward=this._vHeading.clone(),this._vSide=h.Vec3Perp(this._vHeading.clone());var i=this._vHeading.clone().multiplyScalar(this.m_pSteering.ForwardComponent());this._velocity.clone().clone().add(i.clone().multiplyScalar(g.instance.DeltaTime));this._velocity=this._velocity.add(i.clone().multiplyScalar(g.instance.DeltaTime)),h.Truncate(this._velocity,this._maxSpeed);this._soccerAI.Ball.Pos.clone().subtract(this._entity.position);this._entity.position=this._entity.position.add(this._velocity.clone().multiplyScalar(g.instance.DeltaTime));var n=!1;if(this._soccerAI.FrameCount>=this._predictionFrame&&this._soccerAI.FrameCount<this._predictionFrame+this.tempFrameAdd){var a=this._entity.position.clone();this._entity.position=this._entity.position.clone().add(this.observeMovePoint.clone().subtract(this.Pos).normalize().multiplyScalar(.025));var o=this._entity.position.clone(),m=new l;l.subtract(m,o,a);var u=r(60*m.length(),0,this.MaxSpeed);m.normalize(),l.multiplyScalar(m,m,u),n=!0,this.PlayMoveAnimByVelocity(this.fakeV),this.fakeV=m}n||this.PlayMoveAnimByVelocity(this._velocity)}else this._entity.getComponent(s).pause()},o.PlayMoveAnimByVelocity=function(e){var t=this._entity.forward.clone(),i=e.clone();if(t.y=0,i.y=0,i.lengthSqr()>=.05&&!this._animComp.getState("run_touch_chest_high_left").isPlaying&&!this._animComp.getState("pass_center").isPlaying){var n=l.angle(t,i);n>=-Math.PI/3&&n<=Math.PI/3&&!this._animComp.getState("run").isPlaying?this._animComp.crossFade("run"):n>Math.PI/3&&n<3*Math.PI/4&&!this._animComp.getState("move_left").isPlaying?this._animComp.crossFade("move_left"):n>=3*-Math.PI/4&&n<-Math.PI/3&&!this._animComp.getState("move_right").isPlaying&&this._animComp.crossFade("move_right")}else i.lengthSqr()<.05&&//!FieldPlayerStates.FieldPlayer_KickAnimState.Instance.kickAnimPlayer.IsShooting &&
!this._animComp.getState("idle").isPlaying&&!this._animComp.getState("run_touch_chest_high_left").isPlaying&&this._animComp.crossFade("idle")},o.isClosestTeamMemberToBall=function(){return this.playerTeam.PlayerClosestToBall==this},o.isClosestTeamMemberToTarget=function(){return this.playerTeam.PlayerClosestToTarget==this},o.isSubClosestTeamMemberToBall=function(){return this.playerTeam.PlayerSubClosestToBall==this},o.isControllingPlayer=function(){return this.playerTeam.ControllingPlayer==this},o.isReadyForNextKick=function(){return this.m_pKickLimiter.isReady()},o.isReadyForNextOberseMove=function(){return this.m_oberseMoveLimiter.isReady()},o.BallWithinKickingRange=function(){return!!(this.InRangeOfJudge(this._soccerAI.Ball.Pos,c.PlayerInputJudgeRangeAngle,c.PlayerKickingDistance)||this.m_dHorizontalDistToBall<=c.PlayerKickingCircle&&this._soccerAI.Ball.Pos.y<1.8)},o.BallWithinReceivingRange=function(){return this.m_dHorizontalDistToBall<=c.BallWithinReceivingRange},o.PositionInFrontOfPlayer=function(e){return e.clone().subtract(this.Pos).dot(this.Heading)>0},o.isThreatened=function(){for(var e=0;e<this.PlayerTeam.OpponentTeam.PlayerList.length;e++){var t=this.PlayerTeam.OpponentTeam.PlayerList[e],i=h.Vec3DistanceSq(this.Pos,t.Pos);if(this.PositionInFrontOfPlayer(t.Pos)&&i<c.PlayerComfortZone*c.PlayerComfortZone)return!0}return!1},o.IsAheadOfAttacker=function(){var e=this.PlayerTeam.OpponentTeam.HomeGoal.Center.clone();return h.Vec3DistanceSq(this.Pos,e)<h.Vec3DistanceSq(this.PlayerTeam.ControllingPlayer.Pos,e)},o.IsAheadOfSomeone=function(e){var t=this.PlayerTeam.OpponentTeam.HomeGoal.Center.clone();return h.Vec3DistanceSq(this.Pos,t)<h.Vec3DistanceSq(e,t)},o.ObserveMoveOn=function(e){var t=this._soccerAI.Ball.LinearVelocity.clone(),i=this._soccerAI.Ball.LinearVelocity.normalize();if(i.x=0,i.y=0,Math.abs(t.z)>Math.abs(t.x)){var n=new l(0,1,0).cross(this.Heading),a=new l(0,-1,0).cross(this.Heading);n.dot(i)>.1?this.observeMovePoint=this.Pos.clone().add(n.normalize().multiplyScalar(e)):a.dot(i)>.1&&(this.observeMovePoint=this.Pos.clone().add(a.normalize().multiplyScalar(e)))}this.tempFrameAdd=150,this._predictionFrame=this._soccerAI.FrameCount+1},o.InRangeOfJudge=function(e,t,i,n){var a=e.clone().subtract(this.Pos),o=180*Math.acos(a.dot(this._entity.forward)/(a.length()*this._entity.forward.length()))/Math.PI,s=180*Math.acos(a.dot(this._vHeading)/(a.length()*this._vHeading.length()))/Math.PI;return null!=n?a.length()>=n&&a.length()<=i&&o<=t/2||a.length()>=n&&a.length()<=i&&s<=t/2:a.length()<=i&&o<=t/2||a.length()<=i&&s<=t/2},o.isThreatenedByOpponent=function(){var e;return e=this.playerTeam.TeamColor==y.Red?1.2:2,!!this.PlayerTeam.isOpponentWithinRadius(this.Pos,e)},o.HandleMessage=function(e){return!!this._stateMachine.HandleMessage(e)},a}(m));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Untilies.ts","./MovingAIEntity.ts"],(function(e){"use strict";var t,n,i,o,a,r,l,s,c;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.defineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator},function(e){l=e.Constant},function(e){s=e.Untilies},function(e){c=e.MovingAIEntity}],execute:function(){e("PlayerRole",void 0),a._RF.push({},"e4b09ESWGNCSrOGSyiXNHv/","PlayerBase",void 0);var u;r.ccclass,r.property;!function(e){e[e.Attacker=0]="Attacker",e[e.Defender=1]="Defender",e[e.GoalKeeper=2]="GoalKeeper"}(u||(u=e("PlayerRole",{})));e("PlayerBase",function(e){function a(t,n,a,r,l){var s;return s=e.call(this,t,n,a)||this,i(o(s),"playerRole",void 0),i(o(s),"playerTeam",null),i(o(s),"_homeRegion",-1),i(o(s),"_defaultRegion",-1),i(o(s),"m_dDistToBall",99999),i(o(s),"m_dHorizontalDistToBall",99999),s.playerRole=r,s.playerTeam=l,s}t(a,e);var r=a.prototype;return r.SetHomeRegion=function(e){this._homeRegion=e,this._defaultRegion=e},r.SetMaxSpeed=function(e){this._maxSpeed=e},r.SetDistSqToBall=function(e,t){this.m_dDistToBall=e,this.m_dHorizontalDistToBall=t},r.AtTarget=function(){return s.Vec3DistanceSq(this.Pos,this.Steering.Target)<l.PlayerInTargetRange*l.PlayerInTargetRange},r.SetDefaultHomeRegion=function(){this._homeRegion=this._defaultRegion},r.TrackBall=function(){var e=this._soccerAI.Ball.Pos.clone().subtract(this.Pos).normalize();e.y=0,this._vHeading=e},r.FaceBall=function(){var e=this._soccerAI.Ball.Pos.clone().subtract(this.Pos).normalize();e.y=0,this.Entity.forward=e},n(a,[{key:"PlayerTeam",get:function(){return this.playerTeam}},{key:"PlayerRole",get:function(){return this.playerRole}}]),a}(c));a._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,a;return{setters:[function(t){e=t.createClass,n=t.defineProperty},function(t){r=t.cclegacy,i=t._decorator,a=t.assert}],execute:function(){r._RF.push({},"f189ea4KjJPRKl8Lh6pltUi","StateMachine",void 0);i.ccclass,i.property,t("StateMachine",function(){function t(t){n(this,"_owner",void 0),n(this,"_currentState",void 0),n(this,"_previousState",void 0),n(this,"_globalState",void 0),this._owner=t,this._currentState=null,this._previousState=null,this._globalState=null}var r=t.prototype;return r.Update=function(){this._globalState&&this._globalState.Execute(this._owner),this._currentState&&this._currentState.Execute(this._owner)},r.SetCurrentState=function(t){this._currentState=t,this._currentState.Enter(this._owner)},r.SetGlobalState=function(t){this._globalState=t,this._globalState.Enter(this._owner)},r.ChangeState=function(t){var e;a(null!=t,"New state is null"),null!=t&&(this._previousState=this._currentState,null===(e=this._currentState)||void 0===e||e.Exit(this._owner),this._currentState=t,this._currentState.Enter(this._owner))},r.RevertToPreviousState=function(){this.ChangeState(this._previousState)},r.HandleMessage=function(t){return!(!this._currentState||!this._currentState.OnMessage(this._owner,t))||!(!this._globalState||!this._globalState.OnMessage(this._owner,t))},r.IsInState=function(t){return this._currentState==t},e(t,[{key:"CurrentState",get:function(){return this._currentState}},{key:"GlobalState",get:function(){return this._globalState}},{key:"PreviousState",get:function(){return this._previousState}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GoalKeeperAnim.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SoccerAI.ts","./GameManager.ts"],(function(e){"use strict";var i,t,n,o,a,s,l,r,h,_,d,c,g,u,v,m,p,f;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.defineProperty,s=e.createClass},function(e){l=e.cclegacy,r=e._decorator,h=e.Vec3,_=e.Animation,d=e.Collider,c=e.find,g=e.Tween,u=e.clamp,v=e.Vec2,m=e.Component},function(e){p=e.SoccerAI},function(e){f=e.GameManager}],execute:function(){var w,S,P,x,M;l._RF.push({},"fd86ffDkKRKn6h9KvqsGwKC","GoalKeeperAnim",void 0);var y,A=r.ccclass,L=r.property,C=new h(4,0,-55),b=new h(-4,0,-55),T=new h(9,0,-49),F=new h(-9,0,-54),R=(new h(20,0,-38),new h(-20,0,-54),new h(0,0,-1)),I=new h(0,0,-54);!function(e){e[e.LeftUpperSide=0]="LeftUpperSide",e[e.LeftUpperClose=1]="LeftUpperClose",e[e.LeftLowerSide=2]="LeftLowerSide",e[e.LeftLowerClose=3]="LeftLowerClose",e[e.MidUpper=4]="MidUpper",e[e.MidLower=5]="MidLower",e[e.RightUpperSide=6]="RightUpperSide",e[e.RightUpperClose=7]="RightUpperClose",e[e.RightLowerSide=8]="RightLowerSide",e[e.RightLowerClose=9]="RightLowerClose"}(y||(y={}));var z=new Map;z.set(0,y.RightLowerClose),z.set(1,y.RightLowerSide),z.set(2,y.RightUpperClose),z.set(3,y.RightUpperSide),z.set(4,y.LeftLowerClose),z.set(5,y.LeftLowerSide),z.set(6,y.LeftUpperClose),z.set(7,y.LeftUpperSide);var K,H=new Map;!function(e){e[e.move_right=0]="move_right",e[e.run=1]="run",e[e.save_low_left=2]="save_low_left",e[e.save_low_right=3]="save_low_right",e[e.save_side_high_left=4]="save_side_high_left",e[e.save_side_high_right=5]="save_side_high_right",e[e.save_side_low_close_left=6]="save_side_low_close_left",e[e.save_side_low_close_right=7]="save_side_low_close_right",e[e.save_jump_back_left=8]="save_jump_back_left",e[e.save_jump_back_right=9]="save_jump_back_right",e[e.save_forward_left=10]="save_forward_left",e[e.save_forward_right=11]="save_forward_right"}(K||(K={}));e("GoalKeeperAnim",(w=A("GoalKeeperAnim"),S=L(p),w((M=i((x=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return i=e.call.apply(e,[this].concat(s))||this,n(o(i),"soccerAI",M,o(i)),a(o(i),"anim",null),a(o(i),"_ballCurPosition",new h),a(o(i),"_ballFuturePosition",new h),a(o(i),"_goalKeeperPos",new h),a(o(i),"_ballDir",null),a(o(i),"_saveAnimName",null),a(o(i),"_saveAnimStruct",null),a(o(i),"_isInGoalFrame",!0),a(o(i),"_isInGoalArea",!0),a(o(i),"_isInPenaltyArea",!0),a(o(i),"_leftHandCollider",null),a(o(i),"_rightHandCollider",null),a(o(i),"_canSave",!1),a(o(i),"_isSaving",!1),a(o(i),"_isSaveSucceeful",!1),a(o(i),"_isPassorShoot",!1),a(o(i),"RootNode",null),a(o(i),"_saveLowCloseLeft",{SaveAnimName:"save_side_low_close_left",dxMax:1.5,dxMin:-.3,dyMax:0,dyMin:0,StartMovingTime:.2,FallingTime:-1,EndMovingTime:.4}),a(o(i),"_saveLowLeft",{SaveAnimName:"save_low_left",dxMax:2.5,dxMin:-.3,dyMax:0,dyMin:0,StartMovingTime:.4,FallingTime:-1,EndMovingTime:.66}),a(o(i),"_saveLowCloseRight",{SaveAnimName:"save_side_low_close_right",dxMax:-1.5,dxMin:.3,dyMax:0,dyMin:0,StartMovingTime:.2,FallingTime:-1,EndMovingTime:.4}),a(o(i),"_saveLowRight",{SaveAnimName:"save_low_right",dxMax:-2.5,dxMin:.3,dyMax:0,dyMin:0,StartMovingTime:.4,FallingTime:-1,EndMovingTime:.66}),a(o(i),"_saveHighCloseLeft",{SaveAnimName:"save_jump_back_left",dxMax:0,dxMin:0,dyMax:.8,dyMin:0,StartMovingTime:.36,FallingTime:.46,EndMovingTime:1.1}),a(o(i),"_saveHighLeft",{SaveAnimName:"save_side_high_left",dxMax:1.5,dxMin:-.3,dyMax:.8,dyMin:0,StartMovingTime:.3,FallingTime:.5,EndMovingTime:.9}),a(o(i),"_saveHighCloseRight",{SaveAnimName:"save_jump_back_right",dxMax:0,dxMin:0,dyMax:.8,dyMin:0,StartMovingTime:.36,FallingTime:.46,EndMovingTime:1.1}),a(o(i),"_saveHighRight",{SaveAnimName:"save_side_high_right",dxMax:-1.5,dxMin:.3,dyMax:.8,dyMin:0,StartMovingTime:.3,FallingTime:.5,EndMovingTime:.9}),a(o(i),"_playerVelocity",new h),a(o(i),"_goalLastPos",new h),a(o(i),"_reStart",!1),i}t(i,e);var l=i.prototype;return l.onLoad=function(){},l.Init=function(){H.set(y.LeftLowerClose,this._saveLowCloseLeft),H.set(y.LeftLowerSide,this._saveLowLeft),H.set(y.RightLowerClose,this._saveLowCloseRight),H.set(y.RightLowerSide,this._saveLowRight),H.set(y.LeftUpperClose,this._saveHighCloseLeft),H.set(y.LeftUpperSide,this._saveHighLeft),H.set(y.RightUpperClose,this._saveHighCloseRight),H.set(y.RightUpperSide,this._saveHighRight),this.anim=this.getComponent(_),this._leftHandCollider=this.node.getChildByName("Bip01 L Hand Socket").getComponent(d),this._rightHandCollider=this.node.getChildByName("Bip01 R Hand Socket").getComponent(d),this.RootNode=c("goalKeeper/Bip01/Bip01 Pelvis/Bip01 Spine/RootNode"),this._goalKeeperPos=this.node.getWorldPosition(),this.anim.play("idle")},l.update=function(e){0!=f.instance.hasLoaded&&(f.instance.soccerAI.AIPlayOn||this._reStart?(this.OnUpdate(e),this.anim.resume()):(this.anim.pause(),g.stopAll()))},l.OnUpdate=function(e){this._ballCurPosition=this.soccerAI.Ball.Pos,this._ballFuturePosition=this.soccerAI.Ball.GetFuturePos(30),this._ballFuturePosition||(this._ballFuturePosition=this._ballCurPosition),this._goalLastPos=this._goalKeeperPos,this._goalKeeperPos=this.node.getWorldPosition(),this._playerVelocity=this._goalKeeperPos.clone().subtract(this._goalLastPos.clone()).multiplyScalar(1/e),this.PlayMoveAnimByVelocity(),this._ballCurPosition.z<=-8&&!this._isSaving&&this.MoveLeftandRight(e),(h.distance(this._goalKeeperPos,this._ballCurPosition)<=3||this.IsInSaveArea(this._ballFuturePosition)&&h.distance(this._ballFuturePosition,this._ballCurPosition)<4)&&!this._isSaving&&(this.MoveToBall(e,this._ballFuturePosition),this.IsArrive(this._goalKeeperPos,this._ballFuturePosition)&&(this.anim.crossFade("save_forward_left",.3),this._isSaving=!0)),this.CanSave()&&!this._isSaving&&(this._ballDir=this.GetBallDirection(),this.SaveAnimPlay(this._ballDir))},l.ResetGoalKeeperAnim=function(){var e=this;this._isSaving=!1,this._reStart=!0,this.node.setWorldPosition(I),this.node.forward.set(R),this.anim.play("idle"),setTimeout((function(){e._reStart=!1}),100)},l.MoveAnimEvent=function(){var e=u(this._ballFuturePosition.x-this._goalKeeperPos.x,this._saveAnimStruct.dxMin,this._saveAnimStruct.dxMax),i=u(this._ballFuturePosition.y-this._goalKeeperPos.y,this._saveAnimStruct.dyMin,this._saveAnimStruct.dyMax),t=this._saveAnimStruct.EndMovingTime-this._saveAnimStruct.StartMovingTime,n=this._saveAnimStruct.FallingTime-this._saveAnimStruct.StartMovingTime,o=this._saveAnimStruct.EndMovingTime-this._saveAnimStruct.FallingTime,a=new g(this.node).by(t,{position:new h(e,0,0)});0==i&&(n=0,o=0);var s=new g(this.node).by(n,{position:new h(0,i,0)}).call((function(){return l})),l=new g(this.node).by(o,{position:new h(0,-i,0)});new g(this.node).parallel(a,s).start()},l.MoveLeftandRight=function(e){var i=this,t=this._ballCurPosition.clone(),n=this.node.getWorldPosition().clone();if(t.x>=-3&&t.x<=3){this.node.lookAt(R);var o=n.x-t.x;if(o>1){var a=new h(-o,0,0).clone().normalize(),s=new h;h.multiplyScalar(s,a,6*e);var l=new h;h.add(l,s,n),this.node.setWorldPosition(l)}else if(o<-1){var r=new h(-o,0,0).clone().normalize(),_=new h,d=new h;h.multiplyScalar(_,r,6*e),h.add(d,_,n),this.node.setWorldPosition(d)}else this.anim.crossFade("idle")}else if(t.x>2){var c=(2-n.x)/6;new g(this.node).to(c,{position:new h(2,0,n.z)}).call((function(){i.node.lookAt(new h(t.x,0,t.z))})).start()}else{var u=(2+n.x)/6;new g(this.node).to(u,{position:new h(-2,0,n.z)}).call((function(){i.node.lookAt(new h(t.x,0,t.z))})).start()}},l.PlayMoveAnimByVelocity=function(){if(!this._isSaving){var e=this.node.forward.clone(),i=this._playerVelocity.clone();if(e.y=0,i.y=0,!this._isSaving&&i.lengthSqr()>=.1){var t=h.angle(e,i);t>=-Math.PI/4&&t<Math.PI/4&&!this.anim.getState("run").isPlaying?this.anim.crossFade("run"):t>=Math.PI/4&&t<3*Math.PI/4&&!this.anim.getState("move_left").isPlaying?this.anim.crossFade("move_left"):t>=3*-Math.PI/4&&t<-Math.PI/4&&!this.anim.getState("move_right").isPlaying?this.anim.crossFade("move_right"):(t>=3*Math.PI/4||t<3*-Math.PI/4&&!this.anim.getState("run_back").isPlaying)&&this.anim.crossFade("run_back")}else!this._isSaving&&i.lengthSqr()<.1&&this.anim.crossFade("idle")}},l.IsArrive=function(e,i){return e.subtract(i).length()<1.5},l.GetBallDirection=function(){var e,i,t=this._goalKeeperPos.clone(),n=this._ballFuturePosition.clone();if(!(n.y>4.5||n.x>C.x+2.5||n.x<b.x-2.5))return e=n.x>t.x?n.x-t.x>.8?5:4:t.x-n.x>.8?1:0,i=n.y>1.5?2:0,z.get(i|e)},l.GetPredictBallDirection=function(){var e=new h(this._ballCurPosition.x,0,this._ballCurPosition.z),i=new h(this._ballFuturePosition.x,0,this._ballFuturePosition.z),t=new h(this._goalKeeperPos.x,0,this._goalKeeperPos.z),n=new h;h.subtract(n,i,e);var o=new h(this._ballCurPosition.x,this._ballCurPosition.y,C.z),a=(new h(this._ballFuturePosition.x,this._ballFuturePosition.y,C.z),R.clone().negative()),s=h.angle(a,n),l=(e.z-o.z)*Math.tan(s),r=new h;h.projectOnPlane(r,n,R);var _,d,c=new h;if(h.add(c,o,r.normalize().multiplyScalar(l)),!(c.y>3.5||c.x>C.x+1.5||c.x<b.x-1.5))return _=c.x<t.x?t.x-c.x>1?5:4:c.x-t.x>1?1:0,d=c.y>1.5?2:0,z.get(d|_)},l.CanSave=function(){return this.GetPointtoKeeperPlaneDistance(this._ballFuturePosition)<=.2},l.GetPointtoPlaneDistance=function(e,i,t){t.normalize();var n=-1*t.dot(i);return Math.abs(t.dot(e)+n)/Math.sqrt(t.dot(t))},l.GetPointtoKeeperPlaneDistance=function(e){var i=this._goalKeeperPos.clone(),t=R.clone();return h.transformQuat(t,t,this.RootNode.getWorldRotation()),t.normalize(),this.GetPointtoPlaneDistance(e,i,t)},l.StartGetBallDir=function(){return this.GetPointtoKeeperPlaneDistance(this._ballFuturePosition)<=3},l.IsInGoalArea=function(e){return e.x<=T.x&&e.x>=F.x&&e.z>=F.z&&e.z<=T.z},l.IsInSaveArea=function(e){return e.x<=T.x&&e.x>=F.x&&e.z>=F.z-.5&&e.z<=T.z+3},l.MoveToBall=function(e,i){this.node.lookAt(new h(this._ballCurPosition.x,0,this._ballCurPosition.z)),this.MoveToTarget(e,i)},l.MoveToTarget=function(e,i){var t=new v(this._goalKeeperPos.x,this._goalKeeperPos.z),n=new v,o=new v(i.x,i.z);v.subtract(n,o,t),n.normalize();var a=new v;v.multiplyScalar(a,n,8*e);var s=new h(a.x,0,a.y);h.add(s,this._goalKeeperPos,s),this.node.setWorldPosition(s)},l.SaveAnimPlay=function(e){this._saveAnimStruct=H.get(e),this.anim.crossFade(this._saveAnimStruct.SaveAnimName,.2),this._isSaving=!0},l.HandTriggerBegin=function(){this._leftHandCollider.on("onTriggerEnter",this.OnHandOverlap,this),this._rightHandCollider.on("onTriggerEnter",this.OnHandOverlap,this)},l.HandTriggerEnd=function(){this._leftHandCollider.off("onTriggerEnter",this.OnHandOverlap,this),this._rightHandCollider.off("onTriggerEnter",this.OnHandOverlap,this)},l.SaveAnimFinish=function(){this._isSaving=!1,this._saveAnimName=null},l.OnHandOverlap=function(e){if(f.instance.soccerAI.AIPlayOn&&"ball"==e.otherCollider.node.name){this.soccerAI.TeamBlue.HomeGoal.Facing;var i=this.RootNode.forward.clone();this.soccerAI.Ball.LinearVelocity.length()<3?this.soccerAI.Ball.Refresh():this.soccerAI.Ball.Bounce(.7,i.clone().normalize()),f.instance.GameFail()}},s(i,[{key:"IsSaveSucceeful",get:function(){return this._isSaveSucceeful}}]),i}(m)).prototype,"soccerAI",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=x))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Telegram.ts","./MessageDispatcher.ts","./Constant.ts","./BaseAIEntity.ts","./SteeringBehaviors.ts","./Untilies.ts","./MovingAIEntity.ts","./PlayerBase.ts","./StateMachine.ts","./State.ts","./SoccerTeam.ts","./Anim.ts","./FieldPlayerStates.ts","./Regulator.ts","./FieldPlayer.ts","./Ball.ts","./SoccerAI.ts","./YouTubeSDK.ts","./LevelManager.ts","./CameraManager.ts","./LineDrawer.ts","./AIEntityManager.ts","./ColliderManager.ts","./GoalKeeperAnim.ts","./AudioManager.ts","./GameManager.ts","./UIManager.ts","./ShootAnimEvent.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});